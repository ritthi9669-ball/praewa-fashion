<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Praewa Fashion | ‡∏£‡∏∞‡∏ö‡∏ö‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏ü‡∏ä‡∏±‡πà‡∏ô‡∏°‡∏∑‡∏≠‡∏≠‡∏≤‡∏ä‡∏µ‡∏û</title>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;600&family=Sriracha&display=swap" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        :root {
            --primary: #f472b6; --accent: #fbcfe8; --bg: #fffcfc; 
            --text: #502d3c; --muted: #9d7c8a; --white: #ffffff;
            --success: #10b981; --danger: #f87171;
        }

        body {
            font-family: 'Prompt', sans-serif;
            background-color: var(--bg);
            color: var(--text);
            scroll-behavior: smooth;
        }

        .font-sriracha { font-family: 'Sriracha', cursive; }
        
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade { animation: fadeIn 0.5s ease forwards; }
        
        @keyframes heartbeat { 
            0% { transform: scale(1); } 
            14% { transform: scale(1.1); } 
            28% { transform: scale(1); } 
            42% { transform: scale(1.1); } 
            70% { transform: scale(1); } 
        }
        .fa-beat-custom { animation: heartbeat 1.5s infinite; }

        header { background: rgba(255, 255, 255, 0.8); backdrop-filter: blur(16px); }
        .nav-link { font-size: 12px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.2em; color: var(--muted); transition: 0.3s; }
        .nav-link:hover, .nav-link.active { color: var(--primary); }

        #adminBar { background: #1c1917; display: none; }
        #adminBar.active { display: block; }

        .page { display: none; }
        .page.active { display: block; }

        .product-card { border-radius: 32px; transition: 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        .product-card:hover { transform: translateY(-10px); box-shadow: 0 20px 40px -15px rgba(244, 114, 182, 0.3); border-color: var(--accent); }
        .img-container { aspect-ratio: 3/4; border-radius: 24px; overflow: hidden; position: relative; }
        .img-container img { transition: 1s; height: 100%; width: 100%; object-fit: cover; }
        .product-card:hover img { transform: scale(1.05); }

        .modal-overlay { position: fixed; inset: 0; background: rgba(28, 25, 23, 0.6); backdrop-filter: blur(4px); z-index: 2000; display: none; align-items: center; justify-content: center; padding: 20px; }
        .modal-content { background: white; border-radius: 40px; width: 100%; max-width: 500px; padding: 40px; box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25); }

        .search-container { width: 40px; transition: 0.5s; overflow: hidden; background: #f5f5f4; border-radius: 99px; display: flex; align-items: center; }
        .search-container.open { width: 250px; padding-right: 15px; }
        .search-input { background: transparent; border: none; outline: none; width: 0; padding: 0; font-size: 12px; transition: 0.5s; }
        .search-container.open .search-input { width: 100%; padding-left: 10px; }

        .btn-rose { background: var(--primary); color: white; transition: 0.3s; box-shadow: 0 10px 20px -5px rgba(244, 114, 182, 0.4); }
        .btn-rose:hover { background: #db2777; transform: translateY(-2px); }
    </style>
</head>
<body>

    <!-- Loader -->
    <div id="globalLoader" class="fixed inset-0 bg-white/90 backdrop-blur-md z-[9999] flex flex-col items-center justify-center text-rose-50" style="display: none;">
        <i class="fas fa-heart fa-beat-custom text-5xl text-rose-500 mb-6"></i>
        <p class="font-bold text-stone-400 text-[10px] uppercase tracking-[0.3em]">Syncing with Excel...</p>
    </div>

    <!-- Admin Bar -->
    <div id="adminBar" class="text-white py-3 px-6 sticky top-0 z-[1001] shadow-xl">
        <div class="max-w-7xl mx-auto flex justify-between items-center text-[11px]">
            <div class="flex items-center gap-6">
                <span class="text-rose-400 font-bold uppercase tracking-wider"><i class="fas fa-lock mr-2"></i> Admin Mode</span>
                <button onclick="openProductModal()" class="hover:text-rose-300 font-bold">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà</button>
                <button onclick="openSettingsModal()" class="hover:text-rose-300 font-bold">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡πâ‡∏≤‡∏ô</button>
            </div>
            <div class="flex items-center gap-4">
                <button onclick="changeApi()" class="text-stone-400 hover:text-white">‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô API (‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß)</button>
                <button onclick="logoutAdmin()" class="bg-rose-500 hover:bg-rose-600 px-4 py-1.5 rounded-full font-bold transition-all">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
            </div>
        </div>
    </div>

    <!-- Navigation -->
    <nav class="bg-white/70 backdrop-blur-xl border-b border-rose-50 sticky top-0 z-[1000] shadow-sm">
        <div class="max-w-7xl mx-auto px-6 h-24 flex justify-between items-center gap-4">
            <div class="flex items-center gap-4 flex-1">
                <button onclick="openLoginModal()" class="p-2.5 text-stone-300 hover:text-rose-400 transition-all hover:bg-rose-50 rounded-full">
                    <i class="fas fa-user-lock text-xl"></i>
                </button>
                <div id="searchBox" class="search-container">
                    <button onclick="toggleSearch()" class="p-2.5 text-stone-400 hover:text-rose-500">
                        <i class="fas fa-search"></i>
                    </button>
                    <input type="text" id="searchInput" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ä‡∏∏‡∏î‡∏™‡∏ß‡∏¢‡πÜ..." class="search-input" oninput="handleSearch(this.value)">
                </div>
            </div>
            
            <div class="text-center shrink-0">
                <a href="#" onclick="showPage('home')" class="text-3xl md:text-4xl font-sriracha text-rose-500 hover:opacity-80 transition-opacity block">
                    Praewa Fashion
                </a>
                <p class="text-[10px] uppercase tracking-[0.4em] text-stone-400 mt-1 font-medium hidden md:block">Beauty in your style</p>
            </div>

            <div class="flex items-center gap-4 flex-1 justify-end">
                <button class="hidden md:block p-2.5 text-stone-300 hover:text-rose-400 transition-all hover:bg-rose-50 rounded-full">
                    <i class="far fa-heart text-xl"></i>
                </button>
                <button onclick="showPage('cart')" class="relative p-3 bg-stone-50 hover:bg-rose-50 rounded-full transition-all group">
                    <i class="fas fa-shopping-bag text-stone-700 group-hover:text-rose-500"></i>
                    <span id="cartCount" class="absolute -top-1 -right-1 bg-rose-500 text-white text-[9px] w-5 h-5 rounded-full flex items-center justify-center font-bold shadow-lg border-2 border-white" style="display: none;">0</span>
                </button>
            </div>
        </div>
        <div class="max-w-7xl mx-auto flex justify-center gap-6 md:gap-10 py-4 text-[12px] font-bold uppercase tracking-[0.25em] text-stone-500 border-t border-rose-50/30">
            <button onclick="showPage('home')" class="nav-link active" id="nav-home">Home</button>
            <button onclick="showPage('shop')" class="nav-link" id="nav-shop">Shop</button>
            <button onclick="showPage('contact')" class="nav-link" id="nav-contact">Contact</button>
        </div>
    </nav>

    <!-- Main Content Area -->
    <div class="max-w-7xl mx-auto px-6 py-12">
        
        <!-- PAGE: HOME -->
        <div id="page-home" class="page active animate-fade">
            <div class="relative h-[500px] rounded-[50px] overflow-hidden group shadow-2xl mb-24">
                <img src="https://images.unsplash.com/photo-1490481651871-ab68de25d43d?w=1200" class="w-full h-full object-cover">
                <div class="absolute inset-0 bg-gradient-to-r from-rose-100/50 to-transparent flex items-center px-12">
                    <div class="bg-white/90 backdrop-blur-md p-10 rounded-[40px] max-w-md shadow-2xl border border-white/50">
                        <h4 class="text-rose-400 font-bold tracking-widest text-[10px] mb-4 uppercase">New Arrivals</h4>
                        <h2 class="text-5xl font-sriracha text-stone-800 mb-6 leading-tight">Beautiful <br/> Everyday</h2>
                        <p class="text-stone-500 text-sm mb-10 leading-relaxed">‡∏Ñ‡πâ‡∏ô‡∏û‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏±‡πà‡∏ô‡πÉ‡∏à‡πÉ‡∏ô‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì ‡∏Å‡∏±‡∏ö‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏ú‡πâ‡∏≤‡πÅ‡∏ü‡∏ä‡∏±‡πà‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡∏°‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏∏‡∏ì‡πÇ‡∏î‡∏¢‡πÄ‡∏â‡∏û‡∏≤‡∏∞</p>
                        <button onclick="showPage('shop')" class="btn-rose px-10 py-4 rounded-full text-xs font-bold uppercase tracking-widest">Start Shopping</button>
                    </div>
                </div>
            </div>

            <div class="flex justify-between items-end mb-12">
                <div>
                    <h3 class="text-3xl font-sriracha text-stone-800">‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥</h3>
                    <p class="text-rose-300 text-sm italic mt-1 uppercase tracking-widest">Recommended for you</p>
                </div>
                <button onclick="showPage('shop')" class="text-xs font-bold text-rose-400 hover:text-rose-600">‡∏î‡∏π‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î <i class="fas fa-chevron-right ml-1"></i></button>
            </div>
            <div id="homeGrid" class="grid grid-cols-2 lg:grid-cols-4 gap-8"></div>
        </div>

        <!-- PAGE: SHOP -->
        <div id="page-shop" class="page animate-fade">
            <div class="flex flex-col md:flex-row gap-12">
                <aside class="w-full md:w-64">
                    <div class="bg-white p-8 rounded-[40px] shadow-sm border border-rose-50 sticky top-32">
                        <h3 class="font-sriracha text-2xl text-rose-500 mb-6 pb-4 border-b border-rose-50">‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</h3>
                        <div class="flex flex-col gap-5 text-sm font-semibold text-stone-400" id="categoryFilter">
                            <button onclick="filterCat('‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î')" class="text-left hover:text-rose-500 active-cat">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
                            <button onclick="filterCat('‡πÄ‡∏î‡∏£‡∏™')" class="text-left hover:text-rose-500">‡πÄ‡∏î‡∏£‡∏™</button>
                            <button onclick="filterCat('‡πÄ‡∏™‡∏∑‡πâ‡∏≠')" class="text-left hover:text-rose-500">‡πÄ‡∏™‡∏∑‡πâ‡∏≠</button>
                            <button onclick="filterCat('‡∏Å‡∏£‡∏∞‡πÇ‡∏õ‡∏£‡∏á')" class="text-left hover:text-rose-500">‡∏Å‡∏£‡∏∞‡πÇ‡∏õ‡∏£‡∏á</button>
                            <button onclick="filterCat('‡∏Å‡∏≤‡∏á‡πÄ‡∏Å‡∏á')" class="text-left hover:text-rose-500">‡∏Å‡∏≤‡∏á‡πÄ‡∏Å‡∏á</button>
                        </div>
                    </div>
                </aside>
                <div class="flex-1">
                    <div class="flex justify-between items-center mb-10">
                        <h2 id="currentCatTitle" class="text-3xl font-sriracha text-stone-800">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h2>
                        <p id="itemCount" class="text-xs text-stone-400 font-medium"></p>
                    </div>
                    <div id="shopGrid" class="grid grid-cols-2 lg:grid-cols-3 gap-10"></div>
                </div>
            </div>
        </div>

        <!-- PAGE: DETAIL -->
        <div id="page-detail" class="page animate-fade">
            <div id="detailContent"></div>
        </div>

        <!-- PAGE: CART -->
        <div id="page-cart" class="page animate-fade max-w-4xl mx-auto">
            <div class="text-center mb-16">
                <h2 class="text-4xl font-sriracha text-stone-800">Shopping Bag</h2>
                <p id="cartItemsLabel" class="text-rose-300 text-sm mt-2"></p>
            </div>
            <div id="cartList" class="space-y-6"></div>
            <div id="cartSummary" class="bg-white p-12 rounded-[50px] shadow-2xl border-2 border-rose-50 flex flex-col md:flex-row justify-between items-center gap-10 mt-10" style="display: none;">
                <div>
                    <p class="text-stone-400 text-xs font-bold uppercase tracking-widest mb-2">‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏¥‡πâ‡∏ô</p>
                    <h3 id="totalDisplay" class="text-5xl font-bold text-rose-500 tracking-tighter">‡∏ø0</h3>
                </div>
                <button onclick="checkout()" class="bg-stone-900 text-white px-16 py-5 rounded-full text-xs font-bold uppercase tracking-[0.2em] hover:bg-rose-600 transition-all">Confirm Order (LINE)</button>
            </div>
        </div>

        <!-- PAGE: CONTACT -->
        <div id="page-contact" class="page animate-fade max-w-4xl mx-auto">
            <div class="text-center mb-20">
                <h2 class="text-5xl font-sriracha text-stone-800">Get in Touch</h2>
                <p class="text-rose-300 text-sm font-medium mt-4 tracking-widest uppercase italic">‡∏™‡∏≠‡∏ö‡∏ñ‡∏≤‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏£‡∏∑‡∏≠‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÑ‡∏î‡πâ‡∏ó‡∏∏‡∏Å‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡∏Ñ‡πà‡∏∞</p>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-10">
                <a id="linkFB" href="#" target="_blank" class="bg-white p-10 rounded-[50px] shadow-sm border border-rose-50 text-center hover:-translate-y-2 transition-all">
                    <div class="w-16 h-16 bg-blue-50 text-blue-500 rounded-2xl flex items-center justify-center mx-auto mb-6"><i class="fab fa-facebook text-3xl"></i></div>
                    <h4 class="font-bold text-xs uppercase tracking-widest mb-2">Facebook</h4>
                    <p class="text-[11px] text-stone-400 italic">Praewa Fashion Page</p>
                </a>
                <a id="linkLine" href="#" target="_blank" class="bg-white p-10 rounded-[50px] shadow-sm border border-rose-50 text-center hover:-translate-y-2 transition-all">
                    <div class="w-16 h-16 bg-green-50 text-green-500 rounded-2xl flex items-center justify-center mx-auto mb-6"><i class="fab fa-line text-3xl"></i></div>
                    <h4 class="font-bold text-xs uppercase tracking-widest mb-2">Line ID</h4>
                    <p id="textLineID" class="text-[11px] text-stone-400 italic"></p>
                </a>
                <a id="linkPhone" href="#" class="bg-white p-10 rounded-[50px] shadow-sm border border-rose-50 text-center hover:-translate-y-2 transition-all">
                    <div class="w-16 h-16 bg-rose-50 text-rose-500 rounded-2xl flex items-center justify-center mx-auto mb-6"><i class="fas fa-phone-alt text-3xl"></i></div>
                    <h4 class="font-bold text-xs uppercase tracking-widest mb-2">Call Us</h4>
                    <p id="textPhone" class="text-[11px] text-stone-400 italic"></p>
                </a>
            </div>
        </div>

    </div>

    <!-- Footer -->
    <footer class="bg-white py-24 border-t border-rose-50 mt-20 relative overflow-hidden">
        <div class="max-w-7xl mx-auto px-6 flex flex-col items-center">
            <h2 class="text-5xl font-sriracha text-rose-500 mb-8">Praewa Fashion</h2>
            <p class="text-stone-400 text-sm max-w-sm text-center leading-relaxed mb-12 italic">
                "‡∏™‡πà‡∏á‡∏ï‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏ß‡∏¢‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏±‡πà‡∏ô‡πÉ‡∏à‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏ú‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏£‡∏±‡∏Å"
            </p>
            <div class="text-[10px] uppercase tracking-[0.4em] text-stone-300 font-bold">
                &copy; 2026 Praewa Fashion Professional Store | All Rights Reserved
            </div>
        </div>
    </footer>

    <!-- Modals -->
    <div id="loginModal" class="modal-overlay">
        <div class="modal-content text-center">
            <h3 class="text-3xl font-sriracha mb-8">Admin Login</h3>
            <input type="password" id="passInp" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô (admin1234)" class="w-full bg-stone-50 p-5 rounded-3xl mb-6 text-center font-bold outline-none border border-transparent focus:border-rose-200">
            <button onclick="doLogin()" class="btn-rose w-full py-4 rounded-3xl font-bold uppercase tracking-widest text-xs">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
            <button onclick="closeModals()" class="mt-4 text-stone-300 text-xs">‡∏õ‡∏¥‡∏î</button>
        </div>
    </div>

    <div id="productModal" class="modal-overlay">
        <div class="modal-content max-w-lg">
            <h3 id="formTitle" class="text-3xl font-sriracha mb-6">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h3>
            <form id="pForm" class="space-y-4 max-h-[60vh] overflow-y-auto px-2">
                <input type="hidden" id="p_id">
                <div><label class="text-[10px] font-bold text-stone-400 uppercase tracking-widest">‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</label><input type="text" id="p_name" required class="w-full bg-stone-50 p-3 rounded-xl outline-none"></div>
                <div class="grid grid-cols-2 gap-4">
                    <div><label class="text-[10px] font-bold text-stone-400 uppercase tracking-widest">‡∏£‡∏≤‡∏Ñ‡∏≤</label><input type="number" id="p_price" required class="w-full bg-stone-50 p-3 rounded-xl outline-none"></div>
                    <div><label class="text-[10px] font-bold text-stone-400 uppercase tracking-widest">‡∏™‡∏ï‡πä‡∏≠‡∏Å</label><input type="number" id="p_stock" required class="w-full bg-stone-50 p-3 rounded-xl outline-none"></div>
                </div>
                <div><label class="text-[10px] font-bold text-stone-400 uppercase tracking-widest">‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</label>
                    <select id="p_cat" class="w-full bg-stone-50 p-3 rounded-xl outline-none">
                        <option>‡πÄ‡∏î‡∏£‡∏™</option><option>‡πÄ‡∏™‡∏∑‡πâ‡∏≠</option><option>‡∏Å‡∏£‡∏∞‡πÇ‡∏õ‡∏£‡∏á</option><option>‡∏Å‡∏≤‡∏á‡πÄ‡∏Å‡∏á</option>
                    </select>
                </div>
                <div><label class="text-[10px] font-bold text-stone-400 uppercase tracking-widest">‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û (URL)</label><input type="text" id="p_img" class="w-full bg-stone-50 p-3 rounded-xl outline-none"></div>
                <div><label class="text-[10px] font-bold text-stone-400 uppercase tracking-widest">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</label><textarea id="p_desc" class="w-full bg-stone-50 p-3 rounded-xl outline-none h-24"></textarea></div>
                <button type="submit" id="submitBtn" class="btn-rose w-full py-4 rounded-3xl font-bold uppercase tracking-widest text-xs">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á Excel</button>
            </form>
            <button onclick="closeModals()" class="w-full mt-2 py-3 text-stone-300 text-xs">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
        </div>
    </div>

    <div id="settingsModal" class="modal-overlay">
        <div class="modal-content">
            <h3 class="text-3xl font-sriracha mb-8">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤</h3>
            <div class="space-y-4">
                <div><label class="text-[10px] font-bold">Facebook</label><input type="text" id="s_fb" class="w-full bg-stone-50 p-3 rounded-xl"></div>
                <div><label class="text-[10px] font-bold">Line ID</label><input type="text" id="s_line" class="w-full bg-stone-50 p-3 rounded-xl"></div>
                <div><label class="text-[10px] font-bold">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£</label><input type="text" id="s_phone" class="w-full bg-stone-50 p-3 rounded-xl"></div>
                <button onclick="saveStoreSettings()" class="btn-rose w-full py-4 rounded-3xl font-bold uppercase tracking-widest text-xs">‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
            </div>
            <button onclick="closeModals()" class="w-full mt-4 text-stone-300 text-xs">‡∏õ‡∏¥‡∏î</button>
        </div>
    </div>

    <script>
        // ==========================================
        // üå∏ ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ API URL ‡∏ñ‡∏≤‡∏ß‡∏£‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏Ñ‡∏ô‡∏≠‡∏∑‡πà‡∏ô‡πÄ‡∏´‡πá‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• üå∏
        // ==========================================
        const HARDCODED_API_URL = "https://script.google.com/macros/s/AKfycbzexSWRpW2nAsIGUCuMxlg3KZ1uXEmqU7iyGhTukN1wGZ0SDB6VtP14an-o8W4z1miw/exec";
        // ==========================================

        let products = [];
        let storeSettings = { facebook: '#', line: '@praewa', phone: '081-XXX-XXXX' };
        let cart = [];
        let isAdmin = false;
        let activeCat = '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î';
        let searchQuery = '';
        let apiUrl = localStorage.getItem('praewa_api_url') || HARDCODED_API_URL;

        window.onload = async () => {
            if (apiUrl) {
                await fetchData();
                // ‡∏£‡∏∞‡∏ö‡∏ö Auto-Refresh ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏∏‡∏Å 30 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
                setInterval(fetchData, 30000);
            }
            else renderProducts();
        };

        async function fetchData() {
            if (!apiUrl) return;
            try {
                const res = await fetch(apiUrl);
                const data = await res.json();
                products = data.products || [];
                if (data.settings) storeSettings = data.settings;
                updateContactUI();
                renderProducts();
            } catch (e) {
                console.error("Fetch failed:", e);
            }
        }

        function updateContactUI() {
            document.getElementById('linkFB').href = storeSettings.facebook;
            document.getElementById('linkLine').href = `https://line.me/ti/p/${storeSettings.line}`;
            document.getElementById('linkPhone').href = `tel:${storeSettings.phone}`;
            document.getElementById('textLineID').innerText = storeSettings.line;
            document.getElementById('textPhone').innerText = storeSettings.phone;
        }

        function renderProducts() {
            const filtered = products.filter(p => {
                const matchSearch = p.Name.toLowerCase().includes(searchQuery.toLowerCase()) || 
                                   p.Category.toLowerCase().includes(searchQuery.toLowerCase());
                const matchCat = activeCat === '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î' || p.Category === activeCat;
                return matchSearch && matchCat;
            });

            const gridHtml = filtered.map(p => `
                <div class="product-card group bg-white p-4 border border-rose-50 relative">
                    <div class="img-container cursor-pointer" onclick="viewDetail('${p.ID}')">
                        <img src="${p.Image || 'https://via.placeholder.com/400x533'}" class="w-full h-full object-cover">
                        ${p.Stock <= 0 ? '<div class="absolute inset-0 bg-stone-900/40 backdrop-blur-[2px] flex items-center justify-center"><span class="bg-white px-4 py-2 rounded-full font-bold text-xs">OUT OF STOCK</span></div>' : ''}
                    </div>
                    ${isAdmin ? `
                        <div class="absolute top-6 right-6 flex flex-col gap-2 z-10">
                            <button onclick="editItem('${p.ID}')" class="w-10 h-10 bg-white/90 text-blue-500 rounded-full shadow-lg flex items-center justify-center hover:bg-blue-500 hover:text-white transition-all"><i class="fas fa-edit"></i></button>
                            <button onclick="deleteItem('${p.ID}')" class="w-10 h-10 bg-white/90 text-red-500 rounded-full shadow-lg flex items-center justify-center hover:bg-red-500 hover:text-white transition-all"><i class="fas fa-trash"></i></button>
                        </div>
                    ` : ''}
                    <div class="p-6 text-center">
                        <p class="text-[9px] uppercase tracking-widest text-rose-300 font-bold mb-1">${p.Category}</p>
                        <h4 class="text-sm font-medium text-stone-700 truncate mb-2">${p.Name}</h4>
                        <p class="text-rose-500 font-bold">‡∏ø${Number(p.Price).toLocaleString()}</p>
                    </div>
                </div>
            `).join('');

            document.getElementById('shopGrid').innerHTML = gridHtml || '<p class="col-span-full py-20 text-center text-stone-300 italic">‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡πà‡∏∞</p>';
            document.getElementById('homeGrid').innerHTML = products.slice(0, 4).map(p => `
                <div class="product-card group bg-white p-4 border border-rose-50 relative">
                    <div class="img-container cursor-pointer" onclick="viewDetail('${p.ID}')">
                        <img src="${p.Image || 'https://via.placeholder.com/400x533'}" class="w-full h-full object-cover">
                    </div>
                    <div class="p-4 text-center">
                        <h4 class="text-xs font-medium truncate">${p.Name}</h4>
                        <p class="text-rose-500 font-bold text-sm">‡∏ø${Number(p.Price).toLocaleString()}</p>
                    </div>
                </div>
            `).join('');
            
            document.getElementById('itemCount').innerText = `‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ${filtered.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£`;
        }

        function viewDetail(id) {
            const p = products.find(x => x.ID == id);
            if (!p) return;
            
            document.getElementById('detailContent').innerHTML = `
                <div class="bg-white rounded-[60px] overflow-hidden shadow-2xl flex flex-col md:flex-row border border-rose-50">
                    <div class="md:w-1/2 aspect-[4/5] overflow-hidden">
                        <img src="${p.Image}" class="w-full h-full object-cover">
                    </div>
                    <div class="md:w-1/2 p-8 md:p-16 flex flex-col justify-center">
                        <p class="text-[10px] font-bold text-stone-300 uppercase tracking-widest mb-4">Collection / ${p.Category}</p>
                        <h1 class="text-5xl font-sriracha text-stone-800 mb-6">${p.Name}</h1>
                        <p class="text-4xl text-rose-500 font-bold mb-8">‡∏ø${Number(p.Price).toLocaleString()}</p>
                        <div class="bg-rose-50/50 p-6 rounded-[30px] border border-rose-50 mb-10">
                            <h4 class="text-[11px] font-bold uppercase text-stone-400 mb-2">Product Info</h4>
                            <p class="text-sm text-stone-500 leading-relaxed whitespace-pre-line">${p.Description || '‡∏Ñ‡∏±‡∏î‡∏™‡∏£‡∏£‡∏ú‡πâ‡∏≤‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏î‡∏µ ‡∏™‡∏ß‡∏°‡πÉ‡∏™‡πà‡∏™‡∏ö‡∏≤‡∏¢ ‡∏î‡∏µ‡πÑ‡∏ã‡∏ô‡πå‡∏ó‡∏±‡∏ô‡∏™‡∏°‡∏±‡∏¢‡∏ó‡∏µ‡πà‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏ö‡∏∏‡∏Ñ‡∏•‡∏¥‡∏Å‡∏†‡∏≤‡∏û‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì‡∏î‡∏π‡πÇ‡∏î‡∏î‡πÄ‡∏î‡πà‡∏ô'}</p>
                            <p class="mt-4 text-[11px] font-bold text-rose-300 uppercase tracking-widest">STOCK: ${p.Stock} UNITS</p>
                        </div>
                        <div class="flex gap-4">
                            <button onclick="addToCart('${p.ID}')" class="flex-1 btn-rose py-5 rounded-full font-bold text-xs uppercase tracking-widest shadow-2xl ${p.Stock <= 0 ? 'opacity-50 pointer-events-none' : ''}">
                                ${p.Stock > 0 ? 'Add to Bag' : 'Out of Stock'}
                            </button>
                            <button onclick="showPage('shop')" class="w-16 h-16 bg-stone-50 rounded-full flex items-center justify-center text-stone-300 hover:text-rose-500 transition-all shadow-sm"><i class="fas fa-times text-xl"></i></button>
                        </div>
                    </div>
                </div>
            `;
            showPage('detail');
        }

        function addToCart(id) {
            const p = products.find(x => x.ID == id);
            if (p) { cart.push(p); updateCartUI(); alert("‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏á‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏∞ üíñ"); }
        }

        function updateCartUI() {
            const list = document.getElementById('cartList');
            const totalDisplay = document.getElementById('totalDisplay');
            const badge = document.getElementById('cartCount');
            let total = 0;

            if (cart.length === 0) {
                list.innerHTML = `<div class="bg-white p-24 rounded-[60px] text-center shadow-xl border border-rose-50"><i class="fas fa-shopping-bag text-5xl text-rose-100 mb-6"></i><p class="text-stone-400 text-sm">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡πÄ‡∏•‡∏¢‡∏Ñ‡πà‡∏∞</p><button onclick="showPage('shop')" class="mt-8 bg-stone-900 text-white px-10 py-3 rounded-full text-xs font-bold uppercase">Shop Now</button></div>`;
                document.getElementById('cartSummary').style.display = 'none';
                badge.style.display = 'none';
            } else {
                list.innerHTML = cart.map((item, i) => {
                    total += Number(item.Price);
                    return `<div class="bg-white p-6 md:p-8 rounded-[40px] shadow-sm border border-rose-50 flex items-center gap-8"><img src="${item.Image}" class="w-20 h-28 object-cover rounded-2xl shadow-md"><div class="flex-1"><p class="text-[10px] text-rose-300 font-bold mb-1">${item.Category}</p><h4 class="text-lg font-medium text-stone-700">${item.Name}</h4><p class="text-rose-500 font-bold mt-2">‡∏ø${Number(item.Price).toLocaleString()}</p></div><button onclick="removeFromCart(${i})" class="text-stone-200 hover:text-red-400 p-4 transition-all"><i class="fas fa-trash-alt text-xl"></i></button></div>`;
                }).join('');
                document.getElementById('cartSummary').style.display = 'flex';
                totalDisplay.innerText = `‡∏ø${total.toLocaleString()}`;
                badge.innerText = cart.length;
                badge.style.display = 'flex';
            }
            document.getElementById('cartItemsLabel').innerText = `‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ${cart.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤`;
        }

        function removeFromCart(i) { cart.splice(i, 1); updateCartUI(); }

        function checkout() {
            const msg = encodeURIComponent(`‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡πà‡∏∞ ‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤:\n${cart.map(c => `- ${c.Name} (‡∏ø${c.Price})`).join('\n')}\n‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏¥‡πâ‡∏ô: ‡∏ø${cart.reduce((a,b) => a + Number(b.Price), 0).toLocaleString()}`);
            window.open(`https://line.me/ti/p/${storeSettings.line}?text=${msg}`);
        }

        function toggleSearch() {
            const box = document.getElementById('searchBox');
            box.classList.toggle('open');
            if (box.classList.contains('open')) document.getElementById('searchInput').focus();
        }

        function handleSearch(val) {
            searchQuery = val;
            if (val.trim() !== "") showPage('shop');
            renderProducts();
        }

        function filterCat(cat) {
            activeCat = cat;
            document.getElementById('currentCatTitle').innerText = cat;
            document.querySelectorAll('#categoryFilter button').forEach(b => b.classList.toggle('text-rose-500', b.innerText === cat));
            renderProducts();
        }

        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
            const page = document.getElementById(`page-${pageId}`);
            if(page) page.classList.add('active');
            const nav = document.getElementById(`nav-${pageId}`);
            if (nav) nav.classList.add('active');
            window.scrollTo(0,0);
        }

        function openLoginModal() { document.getElementById('loginModal').style.display = 'flex'; }
        function closeModals() { document.querySelectorAll('.modal-overlay').forEach(m => m.style.display = 'none'); }
        
        function doLogin() {
            if (document.getElementById('passInp').value === 'admin1234') {
                isAdmin = true;
                document.getElementById('adminBar').classList.add('active');
                closeModals();
                renderProducts();
                alert("‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡∏Ñ‡πà‡∏∞ ‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏£‡πâ‡∏≤‡∏ô üå∏");
            } else alert("‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á");
        }

        function logoutAdmin() { isAdmin = false; document.getElementById('adminBar').classList.remove('active'); renderProducts(); }

        function openProductModal() {
            document.getElementById('pForm').reset();
            document.getElementById('p_id').value = "";
            document.getElementById('formTitle').innerText = "‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà‡∏•‡∏á Excel";
            document.getElementById('submitBtn').innerText = "‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á Excel";
            document.getElementById('productModal').style.display = 'flex';
        }

        function editItem(id) {
            const p = products.find(x => x.ID == id);
            document.getElementById('p_id').value = p.ID;
            document.getElementById('p_name').value = p.Name;
            document.getElementById('p_price').value = p.Price;
            document.getElementById('p_stock').value = p.Stock;
            document.getElementById('p_cat').value = p.Category;
            document.getElementById('p_img').value = p.Image;
            document.getElementById('p_desc').value = p.Description || "";
            document.getElementById('formTitle').innerText = "‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏î‡∏¥‡∏°";
            document.getElementById('submitBtn').innerText = "‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç";
            document.getElementById('productModal').style.display = 'flex';
        }

        document.getElementById('pForm').onsubmit = async (e) => {
            e.preventDefault();
            const id = document.getElementById('p_id').value;
            const payload = {
                action: id ? 'edit' : 'add',
                id: id || "ID" + Date.now(),
                name: document.getElementById('p_name').value,
                price: document.getElementById('p_price').value,
                stock: document.getElementById('p_stock').value,
                category: document.getElementById('p_cat').value,
                image: document.getElementById('p_img').value,
                description: document.getElementById('p_desc').value
            };
            showLoader(true);
            try {
                await fetch(apiUrl, { method: 'POST', mode: 'no-cors', body: JSON.stringify(payload) });
                setTimeout(async () => { 
                    await fetchData(); 
                    closeModals(); 
                    alert("‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!"); 
                    showLoader(false);
                }, 1500);
            } catch(err) {
                alert("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å");
                showLoader(false);
            }
        };

        async function deleteItem(id) {
            if (!confirm("‡∏•‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ô‡∏µ‡πâ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å Excel?")) return;
            showLoader(true);
            await fetch(apiUrl, { method: 'POST', mode: 'no-cors', body: JSON.stringify({ action: 'delete', id }) });
            setTimeout(async () => { 
                await fetchData(); 
                alert("‡∏•‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!"); 
                showLoader(false);
            }, 1500);
        }

        function openSettingsModal() {
            document.getElementById('s_fb').value = storeSettings.facebook;
            document.getElementById('s_line').value = storeSettings.line;
            document.getElementById('s_phone').value = storeSettings.phone;
            document.getElementById('settingsModal').style.display = 'flex';
        }

        async function saveStoreSettings() {
            const payload = {
                action: 'save_settings',
                facebook: document.getElementById('s_fb').value,
                line: document.getElementById('s_line').value,
                phone: document.getElementById('s_phone').value
            };
            showLoader(true);
            await fetch(apiUrl, { method: 'POST', mode: 'no-cors', body: JSON.stringify(payload) });
            setTimeout(async () => { 
                await fetchData(); 
                closeModals(); 
                alert("‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡πâ‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏∞"); 
                showLoader(false);
            }, 1500);
        }

        function changeApi() {
            const url = prompt("‡∏ß‡∏≤‡∏á Deployment URL ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì:", apiUrl);
            if (url) { apiUrl = url; localStorage.setItem('praewa_api_url', url); fetchData(); }
        }

        function showLoader(s) { document.getElementById('globalLoader').style.display = s ? 'flex' : 'none'; }
    </script>
</body>
</html>
