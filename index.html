<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Praewa Fashion | ‡∏™‡∏ß‡∏¢ ‡∏°‡∏±‡πà‡∏ô‡πÉ‡∏à ‡∏ó‡∏∏‡∏Å‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</title>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;600&family=Sriracha&display=swap" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        :root {
            --primary: #f472b6; --accent: #fbcfe8; --bg: #fff5f7; 
            --text: #502d3c; --muted: #9d7c8a; --white: #ffffff;
            --success: #10b981; --danger: #f87171;
            --soft-pink: #fdf2f8;
        }

        body {
            font-family: 'Prompt', sans-serif;
            background: linear-gradient(135deg, #fff5f7 0%, #fbcfe833 100%);
            color: var(--text);
            min-height: 100vh;
        }

        .font-sriracha { font-family: 'Sriracha', cursive; }
        
        /* Decorations */
        .decor-flower { position: fixed; z-index: -1; opacity: 0.4; pointer-events: none; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade { animation: fadeIn 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
        
        @keyframes heartbeat { 
            0%, 100% { transform: scale(1); } 
            50% { transform: scale(1.1); } 
        }
        .fa-beat-custom { animation: heartbeat 2s infinite; }

        /* UI Elements */
        header { background: rgba(255, 255, 255, 0.7); backdrop-filter: blur(20px); border-bottom: 2px solid var(--accent); }
        .nav-link { font-size: 13px; font-weight: 600; color: var(--muted); transition: 0.3s; position: relative; }
        .nav-link::after { content: ''; position: absolute; bottom: -5px; left: 0; width: 0; height: 2px; background: var(--primary); transition: 0.3s; }
        .nav-link:hover::after, .nav-link.active::after { width: 100%; }
        .nav-link:hover, .nav-link.active { color: var(--primary); }

        .product-card { border-radius: 40px; transition: 0.4s ease; background: white; border: 1px solid rgba(244, 114, 182, 0.1); }
        .product-card:hover { transform: translateY(-12px); shadow: 0 30px 60px -15px rgba(244, 114, 182, 0.3); }
        
        .img-wrap { aspect-ratio: 3/4; border-radius: 32px; overflow: hidden; position: relative; margin: 10px; }
        .img-wrap img { transition: 1.2s; width: 100%; height: 100%; object-fit: cover; }
        .product-card:hover img { transform: scale(1.1); }

        .modal-overlay { position: fixed; inset: 0; background: rgba(80, 45, 60, 0.4); backdrop-filter: blur(8px); z-index: 2000; display: none; align-items: center; justify-content: center; padding: 20px; }
        .modal-content { background: white; border-radius: 50px; width: 100%; max-width: 550px; padding: 45px; box-shadow: 0 40px 100px -20px rgba(0, 0, 0, 0.2); border: 2px solid white; }

        .btn-sweet { background: var(--primary); color: white; transition: 0.4s; box-shadow: 0 10px 25px -5px rgba(244, 114, 182, 0.5); border-radius: 99px; }
        .btn-sweet:hover { background: #db2777; transform: translateY(-3px); box-shadow: 0 15px 30px -5px rgba(244, 114, 182, 0.6); }

        .tag-stock { background: rgba(255, 255, 255, 0.9); padding: 4px 12px; border-radius: 20px; font-size: 10px; font-weight: 700; color: var(--primary); border: 1px solid var(--accent); }

        /* Custom Scroll */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: var(--bg); }
        ::-webkit-scrollbar-thumb { background: var(--accent); border-radius: 10px; }
    </style>
</head>
<body>

    <!-- Floating Decorations -->
    <div class="decor-flower" style="top: 5%; left: 2%; font-size: 60px;">üå∏</div>
    <div class="decor-flower" style="top: 40%; right: 2%; font-size: 40px;">üå∏</div>
    <div class="decor-flower" style="bottom: 10%; left: 5%; font-size: 50px;">üå∫</div>
    <div class="decor-flower" style="top: 20%; left: 20%; font-size: 20px; opacity: 0.2;">üíñ</div>

    <!-- Global Loader -->
    <div id="globalLoader" class="fixed inset-0 bg-white/90 backdrop-blur-md z-[9999] flex flex-col items-center justify-center text-rose-500" style="display: none;">
        <i class="fas fa-heart fa-beat-custom text-6xl mb-6"></i>
        <p class="font-sriracha text-2xl tracking-wide">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏ß‡∏¢‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡πà‡∏∞...</p>
    </div>

    <!-- Admin Tools -->
    <div id="adminBar" class="text-white bg-stone-900 py-3 px-6 sticky top-0 z-[1001] shadow-xl" style="display: none;">
        <div class="max-w-7xl mx-auto flex justify-between items-center text-[11px]">
            <div class="flex items-center gap-6">
                <span class="text-rose-400 font-bold uppercase tracking-wider"><i class="fas fa-user-shield mr-2"></i> ‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏£‡πâ‡∏≤‡∏ô (Admin Mode)</span>
                <button onclick="openProductModal()" class="hover:text-rose-300 font-bold">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏•‡∏á Excel</button>
                <button onclick="openSettingsModal()" class="hover:text-rose-300 font-bold">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Facebook / Line / ‡πÇ‡∏ó‡∏£</button>
            </div>
            <button onclick="logoutAdmin()" class="bg-rose-500 hover:bg-rose-600 px-5 py-2 rounded-full font-bold transition-all shadow-lg shadow-rose-900/50">Logout</button>
        </div>
    </div>

    <!-- Navigation Header -->
    <header class="sticky top-0 z-[1000] shadow-sm">
        <div class="max-w-7xl mx-auto px-6 h-24 flex justify-between items-center gap-4">
            <div class="flex items-center gap-4 flex-1">
                <button onclick="openLoginModal()" class="p-3 text-rose-200 hover:text-rose-400 transition-all hover:bg-white rounded-full shadow-sm">
                    <i class="fas fa-cog text-xl"></i>
                </button>
                <!-- Search Box -->
                <div class="hidden md:flex items-center bg-white/80 border border-rose-100 rounded-full px-4 py-2 w-64 shadow-inner">
                    <i class="fas fa-search text-rose-300 mr-2"></i>
                    <input type="text" id="searchInput" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ä‡∏∏‡∏î‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì..." class="bg-transparent border-none outline-none text-xs w-full" oninput="handleSearch(this.value)">
                </div>
            </div>
            
            <div class="text-center shrink-0">
                <a href="#" onclick="showPage('home')" class="text-4xl md:text-5xl font-sriracha text-rose-500 hover:opacity-80 transition-opacity block leading-none">
                    Praewa Fashion
                </a>
                <p class="text-[10px] uppercase tracking-[0.5em] text-rose-300 mt-2 font-bold hidden md:block">‡∏™‡∏ß‡∏¢ ‡∏°‡∏±‡πà‡∏ô‡πÉ‡∏à ‡∏ó‡∏∏‡∏Å‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</p>
            </div>

            <div class="flex items-center gap-4 flex-1 justify-end">
                <button class="hidden md:block p-3 text-rose-200 hover:text-rose-400 transition-all hover:bg-white rounded-full">
                    <i class="far fa-heart text-xl"></i>
                </button>
                <button onclick="showPage('cart')" class="relative p-4 bg-rose-500 text-white rounded-full shadow-lg shadow-rose-200 hover:scale-110 transition-all group">
                    <i class="fas fa-shopping-bag text-xl"></i>
                    <span id="cartCount" class="absolute -top-1 -right-1 bg-stone-800 text-white text-[9px] w-6 h-6 rounded-full flex items-center justify-center font-bold border-2 border-white" style="display: none;">0</span>
                </button>
            </div>
        </div>
        <!-- Site Map Menu -->
        <div class="max-w-7xl mx-auto flex justify-center gap-4 md:gap-10 py-5 text-[12px] font-bold uppercase tracking-widest text-stone-500 border-t border-rose-50/50">
            <button onclick="showPage('home')" class="nav-link active" id="nav-home">‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</button>
            <button onclick="showPage('shop')" class="nav-link" id="nav-shop">‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</button>
            <button onclick="showPage('shop')" class="nav-link">‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà</button>
            <button onclick="showPage('shop')" class="nav-link text-rose-400">üî• ‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô</button>
            <button onclick="showPage('contact')" class="nav-link" id="nav-contact">‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏£‡∏≤</button>
        </div>
    </header>

    <!-- Main Content Area -->
    <main class="max-w-7xl mx-auto px-6 py-12 min-h-screen">
        
        <!-- PAGE: HOME -->
        <div id="page-home" class="page active animate-fade">
            <!-- Hero Banner -->
            <div class="relative h-[550px] rounded-[60px] overflow-hidden shadow-[0_40px_100px_-20px_rgba(244,114,182,0.4)] mb-24 group">
                <img src="https://images.unsplash.com/photo-1490481651871-ab68de25d43d?w=1200" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-[3s]">
                <div class="absolute inset-0 bg-gradient-to-t from-rose-200/40 via-transparent to-transparent flex items-center px-12">
                    <div class="bg-white/80 backdrop-blur-xl p-14 rounded-[50px] max-w-lg shadow-2xl border border-white/50 animate-fade">
                        <h4 class="text-rose-400 font-bold tracking-[0.3em] text-[10px] mb-6 uppercase">Exclusive New Arrivals</h4>
                        <h2 class="text-6xl font-sriracha text-stone-800 mb-6 leading-tight">Sweet & <br/> Modern</h2>
                        <p class="text-stone-500 text-sm mb-10 leading-relaxed">‡∏Ñ‡πâ‡∏ô‡∏û‡∏ö‡∏ï‡∏±‡∏ß‡∏ï‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏ß‡∏¢‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì ‡∏ú‡πà‡∏≤‡∏ô‡∏Ñ‡∏≠‡∏•‡πÄ‡∏•‡∏Å‡∏ä‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏±‡∏î‡∏™‡∏£‡∏£‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡∏ì‡∏µ‡∏ï ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏´‡∏ç‡∏¥‡∏á‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏Å‡πÉ‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏≠‡πà‡∏≠‡∏ô‡∏´‡∏ß‡∏≤‡∏ô‡πÅ‡∏ï‡πà‡∏°‡∏µ‡∏™‡πÑ‡∏ï‡∏•‡πå</p>
                        <button onclick="showPage('shop')" class="btn-sweet px-12 py-5 text-xs font-bold uppercase tracking-[0.2em]">‡∏ä‡πâ‡∏≠‡∏õ‡πÄ‡∏•‡∏¢‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ</button>
                    </div>
                </div>
            </div>

            <div class="flex justify-between items-end mb-12 px-4">
                <div>
                    <h3 class="text-4xl font-sriracha text-stone-800">‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ (Best Seller)</h3>
                    <p class="text-rose-300 text-sm italic mt-2 uppercase tracking-widest font-bold">Recommended just for you</p>
                </div>
                <button onclick="showPage('shop')" class="bg-white text-rose-400 px-6 py-3 rounded-full text-xs font-bold shadow-sm hover:shadow-lg transition-all">‡∏î‡∏π‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î <i class="fas fa-chevron-right ml-2"></i></button>
            </div>
            <div id="homeGrid" class="grid grid-cols-2 lg:grid-cols-4 gap-10"></div>
        </div>

        <!-- PAGE: SHOP -->
        <div id="page-shop" class="page animate-fade">
            <div class="flex flex-col lg:flex-row gap-16">
                <!-- Sidebar Site Map -->
                <aside class="w-full lg:w-72">
                    <div class="bg-white/80 backdrop-blur-md p-10 rounded-[50px] shadow-sm border border-rose-50 sticky top-32">
                        <h3 class="font-sriracha text-3xl text-rose-500 mb-8 pb-4 border-b-2 border-rose-50">‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h3>
                        <div class="flex flex-col gap-6 text-sm font-bold tracking-wide text-stone-400" id="categoryFilter">
                            <button onclick="filterCat('‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î')" class="text-left hover:text-rose-500 active-cat flex justify-between items-center group">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î <i class="fas fa-circle text-[6px] opacity-0 group-hover:opacity-100 transition-opacity"></i></button>
                            <button onclick="filterCat('‡πÄ‡∏î‡∏£‡∏™')" class="text-left hover:text-rose-500 flex justify-between items-center group">‡∏ä‡∏∏‡∏î‡πÄ‡∏î‡∏£‡∏™ <i class="fas fa-circle text-[6px] opacity-0 group-hover:opacity-100 transition-opacity"></i></button>
                            <button onclick="filterCat('‡πÄ‡∏™‡∏∑‡πâ‡∏≠')" class="text-left hover:text-rose-500 flex justify-between items-center group">‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡πÅ‡∏ü‡∏ä‡∏±‡πà‡∏ô <i class="fas fa-circle text-[6px] opacity-0 group-hover:opacity-100 transition-opacity"></i></button>
                            <button onclick="filterCat('‡∏Å‡∏£‡∏∞‡πÇ‡∏õ‡∏£‡∏á')" class="text-left hover:text-rose-500 flex justify-between items-center group">‡∏Å‡∏£‡∏∞‡πÇ‡∏õ‡∏£‡∏á <i class="fas fa-circle text-[6px] opacity-0 group-hover:opacity-100 transition-opacity"></i></button>
                            <button onclick="filterCat('‡∏Å‡∏≤‡∏á‡πÄ‡∏Å‡∏á')" class="text-left hover:text-rose-500 flex justify-between items-center group">‡∏Å‡∏≤‡∏á‡πÄ‡∏Å‡∏á <i class="fas fa-circle text-[6px] opacity-0 group-hover:opacity-100 transition-opacity"></i></button>
                        </div>

                        <div class="mt-16 bg-rose-500 p-8 rounded-[40px] text-white shadow-xl relative overflow-hidden group">
                            <div class="absolute -top-10 -right-10 w-24 h-24 bg-white/10 rounded-full blur-xl group-hover:scale-150 transition-transform"></div>
                            <h4 class="text-[10px] uppercase font-bold tracking-widest mb-2">Member Special</h4>
                            <h3 class="text-xl font-sriracha mb-4">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å <br/> ‡∏•‡∏î‡∏ó‡∏±‡∏ô‡∏ó‡∏µ 10%</h3>
                            <button class="bg-white text-rose-500 px-6 py-2 rounded-full text-[10px] font-bold shadow-lg">‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°‡πÄ‡∏•‡∏¢</button>
                        </div>
                    </div>
                </aside>
                
                <div class="flex-1">
                    <div class="flex justify-between items-center mb-12">
                        <h2 id="currentCatTitle" class="text-4xl font-sriracha text-stone-800 tracking-tight">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h2>
                        <p id="itemCount" class="text-[11px] text-rose-300 font-bold uppercase tracking-widest bg-white px-5 py-2 rounded-full shadow-sm"></p>
                    </div>
                    <div id="shopGrid" class="grid grid-cols-2 lg:grid-cols-3 gap-12"></div>
                </div>
            </div>
        </div>

        <!-- PAGE: DETAIL -->
        <div id="page-detail" class="page animate-fade">
            <div id="detailContent"></div>
        </div>

        <!-- PAGE: CART -->
        <div id="page-cart" class="page animate-fade max-w-5xl mx-auto">
            <div class="text-center mb-16">
                <h2 class="text-5xl font-sriracha text-stone-800">‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</h2>
                <p id="cartItemsLabel" class="text-rose-300 text-sm mt-4 font-bold uppercase tracking-widest"></p>
            </div>
            <div id="cartList" class="space-y-8"></div>
            
            <div id="cartSummary" class="bg-white p-12 rounded-[60px] shadow-2xl border-2 border-rose-50 flex flex-col md:flex-row justify-between items-center gap-10 mt-16 animate-fade" style="display: none;">
                <div class="text-center md:text-left">
                    <p class="text-stone-400 text-xs font-bold uppercase tracking-widest mb-2">‡∏¢‡∏≠‡∏î‡∏ä‡∏≥‡∏£‡∏∞‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏¥‡πâ‡∏ô</p>
                    <h3 id="totalDisplay" class="text-6xl font-bold text-rose-500 tracking-tighter">‡∏ø0</h3>
                </div>
                <button onclick="checkout()" class="bg-stone-900 text-white px-16 py-6 rounded-full text-xs font-bold uppercase tracking-[0.3em] hover:bg-rose-600 transition-all shadow-2xl hover:-translate-y-1">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏ú‡πà‡∏≤‡∏ô Line</button>
            </div>
        </div>

        <!-- PAGE: CONTACT -->
        <div id="page-contact" class="page animate-fade max-w-4xl mx-auto">
            <div class="text-center mb-24">
                <h2 class="text-6xl font-sriracha text-stone-800">Contact Us</h2>
                <p class="text-rose-400 text-sm font-bold mt-6 tracking-[0.3em] uppercase italic">‡πÄ‡∏£‡∏≤‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏î‡∏π‡πÅ‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏Ñ‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©‡πÄ‡∏™‡∏°‡∏≠‡∏ô‡∏∞‡∏Ñ‡∏∞</p>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-12">
                <a id="linkFB" href="#" target="_blank" class="bg-white p-12 rounded-[60px] shadow-sm border border-rose-50 text-center hover:-translate-y-3 transition-all group">
                    <div class="w-20 h-20 bg-blue-50 text-blue-500 rounded-[30px] flex items-center justify-center mx-auto mb-8 transition-colors group-hover:bg-blue-500 group-hover:text-white shadow-sm rotate-3 group-hover:rotate-0"><i class="fab fa-facebook text-4xl"></i></div>
                    <h4 class="font-bold text-xs uppercase tracking-widest mb-3">Facebook</h4>
                    <p class="text-[11px] text-stone-400 italic font-medium">Praewa Fashion Page</p>
                </a>
                <a id="linkLine" href="#" target="_blank" class="bg-white p-12 rounded-[60px] shadow-sm border border-rose-50 text-center hover:-translate-y-3 transition-all group">
                    <div class="w-20 h-20 bg-green-50 text-green-500 rounded-[30px] flex items-center justify-center mx-auto mb-8 transition-colors group-hover:bg-green-500 group-hover:text-white shadow-sm -rotate-3 group-hover:rotate-0"><i class="fab fa-line text-4xl"></i></div>
                    <h4 class="font-bold text-xs uppercase tracking-widest mb-3">Line ID</h4>
                    <p id="textLineID" class="text-[11px] text-stone-400 italic font-medium"></p>
                </a>
                <a id="linkPhone" href="#" class="bg-white p-12 rounded-[60px] shadow-sm border border-rose-50 text-center hover:-translate-y-3 transition-all group">
                    <div class="w-20 h-20 bg-rose-50 text-rose-500 rounded-[30px] flex items-center justify-center mx-auto mb-8 transition-colors group-hover:bg-rose-500 group-hover:text-white shadow-sm rotate-6 group-hover:rotate-0"><i class="fas fa-phone-alt text-4xl"></i></div>
                    <h4 class="font-bold text-xs uppercase tracking-widest mb-3">Call Center</h4>
                    <p id="textPhone" class="text-[11px] text-stone-400 italic font-medium"></p>
                </a>
            </div>
            
            <div class="mt-24 bg-white/60 p-16 rounded-[70px] border border-rose-50 flex flex-col md:flex-row items-center gap-12 shadow-sm">
                <div class="w-24 h-24 bg-rose-100 rounded-full flex items-center justify-center shrink-0 shadow-lg">
                    <i class="fas fa-map-marker-alt text-4xl text-rose-500"></i>
                </div>
                <div>
                    <h3 class="text-3xl font-sriracha text-stone-800 mb-4">‡∏´‡∏ô‡πâ‡∏≤‡∏£‡πâ‡∏≤‡∏ô‡∏´‡∏•‡∏±‡∏Å (Main Store)</h3>
                    <p class="text-stone-400 text-sm leading-loose">‡πÇ‡∏ã‡∏ô‡πÅ‡∏ü‡∏ä‡∏±‡πà‡∏ô‡∏™‡∏ï‡∏£‡∏µ ‡∏ä‡∏±‡πâ‡∏ô 2 ‡∏´‡πâ‡∏≤‡∏á‡∏™‡∏£‡∏£‡∏û‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏û‡∏£‡∏µ‡πÄ‡∏°‡∏µ‡∏¢‡∏°‡πÉ‡∏à‡∏Å‡∏•‡∏≤‡∏á‡πÄ‡∏°‡∏∑‡∏≠‡∏á <br/> ‡πÄ‡∏õ‡∏¥‡∏î‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô 10:00 - 21:00 ‡∏ô. ‡πÅ‡∏ß‡∏∞‡∏°‡∏≤‡∏•‡∏≠‡∏á‡∏ä‡∏∏‡∏î‡∏™‡∏ß‡∏¢‡πÜ ‡∏Å‡∏±‡∏ô‡πÑ‡∏î‡πâ‡∏ô‡∏∞‡∏Ñ‡∏∞</p>
                </div>
            </div>
        </div>

    </main>

    <!-- Footer -->
    <footer class="bg-white py-32 border-t-4 border-rose-50 relative overflow-hidden mt-auto">
        <div class="absolute top-0 left-1/2 -translate-x-1/2 w-[1200px] h-[1200px] bg-rose-50/20 rounded-full blur-[100px] -z-10 -mt-[600px]"></div>
        <div class="max-w-7xl mx-auto px-6 flex flex-col items-center">
            <h2 class="text-6xl font-sriracha text-rose-500 mb-8 tracking-tighter">Praewa Fashion</h2>
            <p class="text-stone-400 text-[14px] max-w-md text-center leading-loose mb-16 italic font-medium">
                "‡πÄ‡∏£‡∏≤‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏ß‡πà‡∏≤‡∏ú‡∏π‡πâ‡∏´‡∏ç‡∏¥‡∏á‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏ß‡∏¢‡πÉ‡∏ô‡πÅ‡∏ö‡∏ö‡∏Ç‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á <br/> ‡∏™‡πà‡∏á‡∏ï‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏±‡πà‡∏ô‡πÉ‡∏à‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏ú‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏£‡∏±‡∏Å‡∏î‡πâ‡∏ß‡∏¢‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏Ñ‡πà‡∏∞"
            </p>
            <div class="flex gap-10 mb-20">
                <a href="#" class="text-stone-300 hover:text-rose-500 text-2xl transition-all hover:scale-125"><i class="fab fa-facebook"></i></a>
                <a href="#" class="text-stone-300 hover:text-rose-500 text-2xl transition-all hover:scale-125"><i class="fab fa-line"></i></a>
                <a href="#" class="text-stone-300 hover:text-rose-500 text-2xl transition-all hover:scale-125"><i class="fas fa-phone-alt"></i></a>
            </div>
            <div class="text-[10px] uppercase tracking-[0.5em] text-stone-300 font-bold border-t border-rose-50 pt-12 w-full text-center">
                &copy; 2026 Praewa Fashion Professional Store | Powering your Confidence
            </div>
        </div>
    </footer>

    <!-- Modals -->
    <!-- Admin Login -->
    <div id="loginModal" class="modal-overlay">
        <div class="modal-content text-center overflow-hidden relative">
            <div class="absolute top-0 right-0 w-32 h-32 bg-rose-500/5 rounded-full -mr-16 -mt-16"></div>
            <h3 class="text-4xl font-sriracha mb-10 text-stone-800">‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏£‡πâ‡∏≤‡∏ô Login</h3>
            <div class="bg-stone-50 p-10 rounded-[40px] mb-8 border border-rose-50 shadow-inner">
                <input type="password" id="passInp" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô (admin1234)" class="w-full bg-transparent text-2xl text-center font-bold outline-none placeholder:text-stone-200">
            </div>
            <button onclick="doLogin()" class="btn-sweet w-full py-5 font-bold uppercase tracking-widest text-sm mb-4">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡πÇ‡∏´‡∏°‡∏î‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</button>
            <button onclick="closeModals()" class="text-stone-300 text-xs font-bold hover:text-stone-500 transition-colors uppercase tracking-widest">‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á</button>
        </div>
    </div>

    <!-- Product Form -->
    <div id="productModal" class="modal-overlay">
        <div class="modal-content max-w-xl max-h-[90vh] overflow-hidden flex flex-col p-0">
            <div class="bg-stone-900 p-10 flex justify-between items-center text-white">
                <div>
                    <h3 id="formTitle" class="text-3xl font-sriracha">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h3>
                    <p class="text-[9px] uppercase tracking-[0.3em] text-stone-500 mt-1">Excel Database Management</p>
                </div>
                <button onclick="closeModals()" class="text-stone-500 hover:text-white transition-colors"><i class="fas fa-times text-2xl"></i></button>
            </div>
            <form id="pForm" class="p-10 space-y-6 overflow-y-auto custom-scroll flex-1">
                <input type="hidden" id="p_id">
                <div><label class="text-[10px] font-bold text-stone-400 uppercase tracking-widest mb-2 block">‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</label><input type="text" id="p_name" required class="w-full bg-stone-50 p-4 rounded-2xl outline-none border border-stone-100 focus:border-rose-300 font-bold"></div>
                <div class="grid grid-cols-2 gap-6">
                    <div><label class="text-[10px] font-bold text-stone-400 uppercase tracking-widest mb-2 block">‡∏£‡∏≤‡∏Ñ‡∏≤ (‡∏ø)</label><input type="number" id="p_price" required class="w-full bg-stone-50 p-4 rounded-2xl outline-none"></div>
                    <div><label class="text-[10px] font-bold text-stone-400 uppercase tracking-widest mb-2 block">‡∏™‡∏ï‡πä‡∏≠‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</label><input type="number" id="p_stock" required class="w-full bg-stone-50 p-4 rounded-2xl outline-none"></div>
                </div>
                <div><label class="text-[10px] font-bold text-stone-400 uppercase tracking-widest mb-2 block">‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</label>
                    <select id="p_cat" class="w-full bg-stone-50 p-4 rounded-2xl outline-none border border-stone-100">
                        <option>‡πÄ‡∏î‡∏£‡∏™</option><option>‡πÄ‡∏™‡∏∑‡πâ‡∏≠</option><option>‡∏Å‡∏£‡∏∞‡πÇ‡∏õ‡∏£‡∏á</option><option>‡∏Å‡∏≤‡∏á‡πÄ‡∏Å‡∏á</option>
                    </select>
                </div>
                <div><label class="text-[10px] font-bold text-stone-400 uppercase tracking-widest mb-2 block">‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û (URL)</label><input type="text" id="p_img" class="w-full bg-stone-50 p-4 rounded-2xl outline-none" placeholder="https://..."></div>
                <div><label class="text-[10px] font-bold text-stone-400 uppercase tracking-widest mb-2 block">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</label><textarea id="p_desc" class="w-full bg-stone-50 p-4 rounded-2xl outline-none h-32 resize-none" placeholder="‡∏ö‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏ú‡πâ‡∏≤ ‡∏´‡∏£‡∏∑‡∏≠‡∏à‡∏∏‡∏î‡πÄ‡∏î‡πà‡∏ô‡∏Ç‡∏≠‡∏á‡∏ä‡∏∏‡∏î‡∏ô‡∏µ‡πâ..."></textarea></div>
                <button type="submit" id="submitBtn" class="btn-sweet w-full py-5 font-bold uppercase tracking-widest text-xs">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏á Excel</button>
            </form>
        </div>
    </div>

    <!-- Store Settings -->
    <div id="settingsModal" class="modal-overlay">
        <div class="modal-content">
            <h3 class="text-3xl font-sriracha mb-10 text-stone-800">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏£‡πâ‡∏≤‡∏ô</h3>
            <div class="space-y-6">
                <div><label class="text-[10px] font-bold uppercase text-stone-400 mb-2 block">Facebook Page Link</label><input type="text" id="s_fb" class="w-full bg-stone-50 p-4 rounded-2xl outline-none border border-stone-100"></div>
                <div><label class="text-[10px] font-bold uppercase text-stone-400 mb-2 block">Line ID</label><input type="text" id="s_line" class="w-full bg-stone-50 p-4 rounded-2xl outline-none border border-stone-100"></div>
                <div><label class="text-[10px] font-bold uppercase text-stone-400 mb-2 block">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå</label><input type="text" id="s_phone" class="w-full bg-stone-50 p-4 rounded-2xl outline-none border border-stone-100"></div>
                <button onclick="saveStoreSettings()" class="btn-sweet w-full py-5 font-bold uppercase tracking-widest text-xs mt-6">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á</button>
            </div>
            <button onclick="closeModals()" class="w-full mt-6 text-stone-300 text-xs font-bold uppercase tracking-widest">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
        </div>
    </div>

    <script>
        // ==========================================
        // üå∏ ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Excel ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ üå∏
        // ==========================================
        const API_URL = "https://script.google.com/macros/s/AKfycbzexSWRpW2nAsIGUCuMxlg3KZ1uXEmqU7iyGhTukN1wGZ0SDB6VtP14an-o8W4z1miw/exec";
        // ==========================================

        let products = [];
        let storeSettings = { facebook: '#', line: '@praewa', phone: '081-XXX-XXXX' };
        let cart = [];
        let isAdmin = false;
        let activeCat = '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î';
        let searchQuery = '';

        window.onload = async () => {
            await fetchData();
            // ‡∏£‡∏∞‡∏ö‡∏ö Auto-Refresh ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏∏‡∏Å 1 ‡∏ô‡∏≤‡∏ó‡∏µ
            setInterval(fetchData, 60000);
        };

        async function fetchData() {
            if (!API_URL) return;
            try {
                const res = await fetch(API_URL);
                const data = await res.json();
                products = data.products || [];
                if (data.settings) storeSettings = data.settings;
                updateContactUI();
                renderProducts();
            } catch (e) {
                console.error("Fetch failed:", e);
            }
        }

        function updateContactUI() {
            document.getElementById('linkFB').href = storeSettings.facebook;
            document.getElementById('linkLine').href = `https://line.me/ti/p/${storeSettings.line}`;
            document.getElementById('linkPhone').href = `tel:${storeSettings.phone}`;
            document.getElementById('textLineID').innerText = storeSettings.line;
            document.getElementById('textPhone').innerText = storeSettings.phone;
        }

        function renderProducts() {
            const filtered = products.filter(p => {
                const matchSearch = p.Name.toLowerCase().includes(searchQuery.toLowerCase()) || 
                                   p.Category.toLowerCase().includes(searchQuery.toLowerCase());
                const matchCat = activeCat === '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î' || p.Category === activeCat;
                return matchSearch && matchCat;
            });

            const gridHtml = filtered.map(p => `
                <div class="product-card group relative flex flex-col">
                    <div class="img-wrap cursor-pointer shadow-lg group-hover:shadow-rose-200/50 transition-all" onclick="viewDetail('${p.ID}')">
                        <img src="${p.Image || 'https://via.placeholder.com/400x533'}" alt="${p.Name}">
                        <div class="absolute top-4 left-4 flex gap-2">
                            <span class="tag-stock">STOCK: ${p.Stock}</span>
                        </div>
                        ${p.Stock <= 0 ? '<div class="absolute inset-0 bg-stone-900/60 backdrop-blur-[4px] flex items-center justify-center"><span class="bg-white/90 text-stone-800 px-6 py-2 rounded-full font-bold text-xs uppercase tracking-widest shadow-xl">Out of Stock</span></div>' : ''}
                    </div>
                    ${isAdmin ? `
                        <div class="absolute top-8 right-8 flex flex-col gap-3 z-10 opacity-0 group-hover:opacity-100 transition-opacity">
                            <button onclick="editItem('${p.ID}')" class="w-12 h-12 bg-white/90 text-blue-500 rounded-full shadow-2xl flex items-center justify-center hover:bg-blue-500 hover:text-white transition-all transform scale-90 hover:scale-100"><i class="fas fa-edit"></i></button>
                            <button onclick="deleteItem('${p.ID}')" class="w-12 h-12 bg-white/90 text-red-500 rounded-full shadow-2xl flex items-center justify-center hover:bg-red-500 hover:text-white transition-all transform scale-90 hover:scale-100"><i class="fas fa-trash"></i></button>
                        </div>
                    ` : ''}
                    <div class="p-8 pt-4 text-center">
                        <p class="text-[9px] uppercase tracking-[0.3em] text-rose-300 font-bold mb-2">${p.Category}</p>
                        <h4 class="text-lg font-medium text-stone-700 truncate mb-3 font-prompt tracking-tight px-4">${p.Name}</h4>
                        <p class="text-rose-500 font-bold text-2xl font-prompt">‡∏ø${Number(p.Price).toLocaleString()}</p>
                        <button onclick="addToCart('${p.ID}')" class="mt-6 w-full py-3 rounded-2xl text-[10px] font-bold uppercase tracking-widest transition-all ${p.Stock > 0 ? 'bg-rose-50 text-rose-400 hover:bg-rose-500 hover:text-white shadow-sm' : 'bg-stone-100 text-stone-300 cursor-not-allowed'}">
                            ${p.Stock > 0 ? '‡πÉ‡∏™‡πà‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤' : '‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏´‡∏°‡∏î'}
                        </button>
                    </div>
                </div>
            `).join('');

            const shopGrid = document.getElementById('shopGrid');
            const homeGrid = document.getElementById('homeGrid');
            
            if(shopGrid) shopGrid.innerHTML = gridHtml || '<p class="col-span-full py-32 text-center text-rose-200 italic font-sriracha text-2xl">‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡πà‡∏∞...</p>';
            if(homeGrid) homeGrid.innerHTML = filtered.slice(0, 4).map(p => `
                 <div class="product-card group relative overflow-hidden flex flex-col bg-white/50 border-none shadow-none hover:shadow-xl transition-all">
                    <div class="img-wrap cursor-pointer" onclick="viewDetail('${p.ID}')">
                        <img src="${p.Image || 'https://via.placeholder.com/400x533'}" class="w-full h-full object-cover">
                    </div>
                    <div class="p-6 text-center">
                        <h4 class="text-sm font-medium truncate font-prompt mb-1">${p.Name}</h4>
                        <p class="text-rose-500 font-bold text-lg font-prompt">‡∏ø${Number(p.Price).toLocaleString()}</p>
                    </div>
                </div>
            `).join('');
            
            document.getElementById('itemCount').innerText = `‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ${filtered.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£`;
        }

        function viewDetail(id) {
            const p = products.find(x => x.ID == id);
            if (!p) return;
            
            document.getElementById('detailContent').innerHTML = `
                <div class="bg-white rounded-[70px] overflow-hidden shadow-[0_50px_120px_-30px_rgba(0,0,0,0.15)] flex flex-col md:flex-row border border-white">
                    <div class="md:w-1/2 aspect-[4/5] overflow-hidden">
                        <img src="${p.Image}" class="w-full h-full object-cover hover:scale-105 transition-transform duration-[3s]">
                    </div>
                    <div class="md:w-1/2 p-12 md:p-24 flex flex-col justify-center relative overflow-hidden">
                        <div class="absolute -bottom-20 -right-20 w-64 h-64 bg-rose-50 rounded-full blur-3xl opacity-50"></div>
                        <p class="text-[10px] font-bold text-rose-300 uppercase tracking-[0.4em] mb-8">Collection / ${p.Category}</p>
                        <h1 class="text-6xl font-sriracha text-stone-800 mb-8 leading-tight">${p.Name}</h1>
                        <div class="flex items-baseline gap-6 mb-10">
                            <p class="text-5xl text-rose-500 font-bold tracking-tighter">‡∏ø${Number(p.Price).toLocaleString()}</p>
                            <p class="text-lg text-stone-200 line-through">‡∏ø${(Number(p.Price)*1.2).toLocaleString()}</p>
                        </div>
                        <div class="bg-rose-50/50 p-8 rounded-[40px] border border-rose-50 mb-12 relative z-10">
                            <h4 class="text-[11px] font-bold uppercase text-stone-400 mb-4 tracking-widest flex items-center"><i class="fas fa-info-circle mr-2 text-rose-300"></i> Product Details</h4>
                            <p class="text-sm text-stone-500 leading-relaxed whitespace-pre-line font-medium italic mb-6">"${p.Description || '‡∏ä‡∏∏‡∏î‡∏™‡∏ß‡∏¢‡∏î‡∏µ‡πÑ‡∏ã‡∏ô‡πå‡∏û‡∏£‡∏µ‡πÄ‡∏°‡∏µ‡∏¢‡∏° ‡∏™‡∏ß‡∏°‡πÉ‡∏™‡πà‡∏™‡∏ö‡∏≤‡∏¢ ‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏±‡πà‡∏ô‡πÉ‡∏à‡πÉ‡∏ô‡∏ó‡∏∏‡∏Å‡∏ó‡πà‡∏ß‡∏á‡∏ó‡πà‡∏≤‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì'}"</p>
                            <div class="flex items-center gap-3">
                                <div class="w-2 h-2 rounded-full ${p.Stock > 0 ? 'bg-green-400' : 'bg-red-400'}"></div>
                                <p class="text-[11px] font-bold text-stone-400 uppercase tracking-widest">STOCK: ${p.Stock} UNITS AVAILABLE</p>
                            </div>
                        </div>

                        <div class="mb-10">
                             <p class="text-[10px] font-bold text-stone-400 uppercase tracking-widest mb-4 block">Select Size (‡πÑ‡∏ã‡∏™‡πå)</p>
                             <div class="flex gap-4">
                                ${['S', 'M', 'L', 'XL'].map(s => `<button class="w-12 h-12 rounded-2xl border-2 border-rose-50 text-stone-400 font-bold hover:border-rose-500 hover:text-rose-500 transition-all">${s}</button>`).join('')}
                             </div>
                        </div>

                        <div class="flex gap-5">
                            <button onclick="addToCart('${p.ID}')" class="flex-1 btn-sweet py-6 rounded-full font-bold text-xs uppercase tracking-[0.3em] shadow-2xl ${p.Stock <= 0 ? 'opacity-40 pointer-events-none' : ''}">
                                ${p.Stock > 0 ? 'Add to Shopping Bag' : 'Out of Stock'}
                            </button>
                            <button onclick="showPage('shop')" class="w-20 h-20 bg-stone-50 rounded-full flex items-center justify-center text-stone-300 hover:text-rose-500 transition-all shadow-sm border border-white hover:border-rose-100"><i class="fas fa-times text-2xl"></i></button>
                        </div>
                    </div>
                </div>
            `;
            showPage('detail');
        }

        // --- Cart System ---
        function addToCart(id) {
            const p = products.find(x => x.ID == id);
            if (p) { 
                if(p.Stock <= 0) return alert("‡∏Ç‡∏≠‡∏≠‡∏†‡∏±‡∏¢ ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏´‡∏°‡∏î‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß‡∏Ñ‡πà‡∏∞");
                cart.push(p); 
                updateCartUI(); 
                alert("‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏á‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏∞ ‡∏Ç‡∏≠‡πÉ‡∏´‡πâ‡∏™‡∏ß‡∏¢‡∏™‡∏°‡∏´‡∏ß‡∏±‡∏á‡∏ô‡∏∞‡∏Ñ‡∏∞ üíñ"); 
            }
        }

        function updateCartUI() {
            const list = document.getElementById('cartList');
            const totalDisplay = document.getElementById('totalDisplay');
            const badge = document.getElementById('cartCount');
            let total = 0;

            if (cart.length === 0) {
                list.innerHTML = `
                    <div class="bg-white p-32 rounded-[70px] text-center shadow-xl border border-rose-50 relative overflow-hidden">
                        <div class="absolute top-0 right-0 w-64 h-64 bg-rose-50/20 rounded-full -mr-32 -mt-32"></div>
                        <i class="fas fa-shopping-bag text-8xl text-rose-100 mb-10"></i>
                        <h3 class="text-2xl font-sriracha text-stone-400">‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏õ‡∏•‡πà‡∏≤‡∏Ñ‡πà‡∏∞</h3>
                        <p class="text-stone-300 text-sm mt-2 font-medium uppercase tracking-widest italic">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ä‡∏∏‡∏î‡∏™‡∏ß‡∏¢‡πÜ ‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡πÄ‡∏•‡∏¢ ‡∏•‡∏≠‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏î‡∏π‡∏Å‡πà‡∏≠‡∏ô‡∏ô‡∏∞‡∏Ñ‡∏∞</p>
                        <button onclick="showPage('shop')" class="mt-12 bg-stone-900 text-white px-12 py-5 rounded-full text-xs font-bold uppercase tracking-widest shadow-xl shadow-stone-200">Go to Shopping</button>
                    </div>`;
                document.getElementById('cartSummary').style.display = 'none';
                badge.style.display = 'none';
            } else {
                list.innerHTML = cart.map((item, i) => {
                    total += Number(item.Price);
                    return `
                        <div class="bg-white p-8 md:p-12 rounded-[50px] shadow-sm border border-rose-50 flex items-center gap-10 hover:shadow-xl transition-all">
                            <img src="${item.Image}" class="w-32 h-40 object-cover rounded-[30px] shadow-lg">
                            <div class="flex-1">
                                <p class="text-[10px] text-rose-300 font-bold uppercase tracking-widest mb-2">${item.Category}</p>
                                <h4 class="text-2xl font-medium text-stone-700 font-prompt">${item.Name}</h4>
                                <p class="text-rose-500 font-bold text-3xl mt-4 font-prompt tracking-tighter">‡∏ø${Number(item.Price).toLocaleString()}</p>
                            </div>
                            <button onclick="removeFromCart(${i})" class="w-16 h-16 bg-rose-50 text-rose-200 hover:text-red-400 rounded-full transition-all flex items-center justify-center text-2xl hover:bg-red-50"><i class="fas fa-trash-alt"></i></button>
                        </div>`;
                }).join('');
                document.getElementById('cartSummary').style.display = 'flex';
                totalDisplay.innerText = `‡∏ø${total.toLocaleString()}`;
                badge.innerText = cart.length;
                badge.style.display = 'flex';
            }
            document.getElementById('cartItemsLabel').innerText = `‡∏°‡∏µ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ${cart.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ ‡∏£‡∏≠‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏Ñ‡πà‡∏∞`;
        }

        function removeFromCart(i) { cart.splice(i, 1); updateCartUI(); }

        function checkout() {
            const msg = encodeURIComponent(`‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡πà‡∏∞ ‡∏™‡∏ô‡πÉ‡∏à‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏à‡∏≤‡∏Å Praewa Fashion ‚ú®\n\n‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£:\n${cart.map((c, idx) => `${idx+1}. ${c.Name} (‡∏ø${c.Price})`).join('\n')}\n\n‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏¥‡πâ‡∏ô: ‡∏ø${cart.reduce((a,b) => a + Number(b.Price), 0).toLocaleString()}\n\n‡∏£‡∏ö‡∏Å‡∏ß‡∏ô‡πÄ‡∏ä‡πá‡∏Ñ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡πâ‡∏î‡πâ‡∏ß‡∏¢‡∏ô‡∏∞‡∏Ñ‡∏∞ ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡πà‡∏∞ üôèüíñ`);
            window.open(`https://line.me/ti/p/${storeSettings.line}?text=${msg}`);
        }

        // --- Navigation & Search ---
        function handleSearch(val) {
            searchQuery = val;
            if (val.trim() !== "") showPage('shop');
            renderProducts();
        }

        function filterCat(cat) {
            activeCat = cat;
            document.getElementById('currentCatTitle').innerText = cat;
            document.querySelectorAll('#categoryFilter button').forEach(b => {
                const isActive = b.innerText === (cat === '‡πÄ‡∏î‡∏£‡∏™' ? '‡∏ä‡∏∏‡∏î‡πÄ‡∏î‡∏£‡∏™' : cat === '‡πÄ‡∏™‡∏∑‡πâ‡∏≠' ? '‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡πÅ‡∏ü‡∏ä‡∏±‡πà‡∏ô' : cat);
                b.classList.toggle('text-rose-500', isActive);
                b.classList.toggle('active-cat', isActive);
                b.classList.toggle('translate-x-3', isActive);
            });
            renderProducts();
        }

        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
            const page = document.getElementById(`page-${pageId}`);
            if(page) page.classList.add('active');
            const nav = document.getElementById(`nav-${pageId}`);
            if (nav) nav.classList.add('active');
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // --- Admin Controls ---
        function openLoginModal() { document.getElementById('loginModal').style.display = 'flex'; }
        function closeModals() { document.querySelectorAll('.modal-overlay').forEach(m => m.style.display = 'none'); }
        
        function doLogin() {
            if (document.getElementById('passInp').value === 'admin1234') {
                isAdmin = true;
                document.getElementById('adminBar').style.display = 'block';
                closeModals();
                renderProducts();
                alert("‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡∏Ñ‡πà‡∏∞ ‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡∏ô‡∏™‡∏ß‡∏¢ üå∏‚ú®");
            } else alert("‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏ô‡∏∞‡∏Ñ‡∏∞ ‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏∞");
        }

        function logoutAdmin() { isAdmin = false; document.getElementById('adminBar').style.display = 'none'; renderProducts(); }

        function openProductModal() {
            document.getElementById('pForm').reset();
            document.getElementById('p_id').value = "";
            document.getElementById('formTitle').innerText = "‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ä‡∏¥‡πâ‡∏ô‡πÉ‡∏´‡∏°‡πà‡∏•‡∏á Excel";
            document.getElementById('submitBtn').innerText = "‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á Excel";
            document.getElementById('productModal').style.display = 'flex';
        }

        function editItem(id) {
            const p = products.find(x => x.ID == id);
            document.getElementById('p_id').value = p.ID;
            document.getElementById('p_name').value = p.Name;
            document.getElementById('p_price').value = p.Price;
            document.getElementById('p_stock').value = p.Stock;
            document.getElementById('p_cat').value = p.Category;
            document.getElementById('p_img').value = p.Image;
            document.getElementById('p_desc').value = p.Description || "";
            document.getElementById('formTitle').innerText = "‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô Excel";
            document.getElementById('submitBtn').innerText = "‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏°";
            document.getElementById('productModal').style.display = 'flex';
        }

        document.getElementById('pForm').onsubmit = async (e) => {
            e.preventDefault();
            const id = document.getElementById('p_id').value;
            const payload = {
                action: id ? 'edit' : 'add',
                id: id || "ID" + Date.now(),
                name: document.getElementById('p_name').value,
                price: document.getElementById('p_price').value,
                stock: document.getElementById('p_stock').value,
                category: document.getElementById('p_cat').value,
                image: document.getElementById('p_img').value,
                description: document.getElementById('p_desc').value,
                size: "S,M,L,XL", color: "‡∏ï‡∏≤‡∏°‡∏£‡∏π‡∏õ"
            };
            showLoader(true);
            try {
                await fetch(API_URL, { method: 'POST', mode: 'no-cors', body: JSON.stringify(payload) });
                setTimeout(async () => { 
                    await fetchData(); 
                    closeModals(); 
                    alert("‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏∞! ‚ú®"); 
                    showLoader(false);
                }, 2000);
            } catch(err) {
                alert("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å");
                showLoader(false);
            }
        };

        async function deleteItem(id) {
            if (!confirm("‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏ä‡∏∏‡∏î‡∏ô‡∏µ‡πâ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏•‡∏∞ Excel ‡∏à‡∏£‡∏¥‡∏á‡πÜ ‡πÉ‡∏ä‡πà‡πÑ‡∏´‡∏°‡∏Ñ‡∏∞?")) return;
            showLoader(true);
            await fetch(API_URL, { method: 'POST', mode: 'no-cors', body: JSON.stringify({ action: 'delete', id }) });
            setTimeout(async () => { 
                await fetchData(); 
                alert("‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏∞"); 
                showLoader(false);
            }, 2000);
        }

        function openSettingsModal() {
            document.getElementById('s_fb').value = storeSettings.facebook;
            document.getElementById('s_line').value = storeSettings.line;
            document.getElementById('s_phone').value = storeSettings.phone;
            document.getElementById('settingsModal').style.display = 'flex';
        }

        async function saveStoreSettings() {
            const payload = {
                action: 'save_settings',
                facebook: document.getElementById('s_fb').value,
                line: document.getElementById('s_line').value,
                phone: document.getElementById('s_phone').value
            };
            showLoader(true);
            await fetch(API_URL, { method: 'POST', mode: 'no-cors', body: JSON.stringify(payload) });
            setTimeout(async () => { 
                await fetchData(); 
                closeModals(); 
                alert("‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏∞ üå∏"); 
                showLoader(false);
            }, 2000);
        }

        function showLoader(s) { document.getElementById('globalLoader').style.display = s ? 'flex' : 'none'; }
    </script>
</body>
</html>
