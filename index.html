import React, { useState, useEffect } from 'react';
import { 
  ShoppingBag, Edit3, Plus, Trash2, X, Check, Menu, 
  ShoppingCart, Lock, LogOut, Settings, Phone, 
  Facebook, MessageCircle, Info, ChevronRight, Package,
  Search, Heart, ArrowRight, Store, MapPin, RefreshCcw
} from 'lucide-react';

export default function App() {
  // --- States ---
  const [currentPage, setCurrentPage] = useState('home');
  const [products, setProducts] = useState([]);
  const [storeSettings, setStoreSettings] = useState({
    facebook: 'PraewaFashionPage',
    line: '@praewa',
    phone: '081-XXX-XXXX'
  });
  const [cart, setCart] = useState([]);
  const [loading, setLoading] = useState(false);
  const [isAdmin, setIsAdmin] = useState(false);
  const [showLogin, setShowLogin] = useState(false);
  const [selectedProduct, setSelectedProduct] = useState(null);
  const [activeCategory, setActiveCategory] = useState('‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î');
  
  // Search State
  const [searchQuery, setSearchQuery] = useState('');
  const [isSearchOpen, setIsSearchOpen] = useState(false);
  
  // Settings & API
  const [apiUrl, setApiUrl] = useState(localStorage.getItem('praewa_api_url') || '');
  const [showConfig, setShowConfig] = useState(false);
  const [showContactEdit, setShowContactEdit] = useState(false);

  // Form States
  const [productForm, setProductForm] = useState({ id: '', name: '', price: '', category: '‡πÄ‡∏î‡∏£‡∏™', image: '', stock: 10, description: '', size: 'S,M,L', color: '‡∏ä‡∏°‡∏û‡∏π' });
  const [contactForm, setContactForm] = useState({ facebook: '', line: '', phone: '' });

  // --- Initialization ---
  useEffect(() => {
    // Inject Fonts
    const link = document.createElement('link');
    link.href = 'https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;600&family=Sriracha&display=swap';
    link.rel = 'stylesheet';
    document.head.appendChild(link);

    if (apiUrl) fetchData();
  }, [apiUrl]);

  const fetchData = async () => {
    setLoading(true);
    try {
      const res = await fetch(apiUrl);
      const data = await res.json();
      if (data.products) setProducts(data.products);
      if (data.settings) {
        setStoreSettings(data.settings);
        setContactForm(data.settings);
      }
    } catch (e) {
      console.error("Fetch error:", e);
    }
    setLoading(false);
  };

  // --- Business Logic ---
  const handleSaveProduct = async (e) => {
    e.preventDefault();
    if (!apiUrl) return alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ API URL ‡∏Å‡πà‡∏≠‡∏ô");
    
    const isEdit = !!productForm.id;
    const payload = {
      action: isEdit ? 'edit' : 'add',
      ...productForm,
      id: productForm.id || "P" + Date.now()
    };

    setLoading(true);
    try {
      await fetch(apiUrl, { method: 'POST', mode: 'no-cors', body: JSON.stringify(payload) });
      setTimeout(() => {
        fetchData();
        setShowConfig(false);
        setProductForm({ id: '', name: '', price: '', category: '‡πÄ‡∏î‡∏£‡∏™', image: '', stock: 10, description: '', size: 'S,M,L', color: '‡∏ä‡∏°‡∏û‡∏π' });
        alert("‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏•‡∏á Excel ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!");
      }, 1000);
    } catch (e) { alert("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î"); }
    setLoading(false);
  };

  const handleSaveSettings = async () => {
    if (!apiUrl) return;
    setLoading(true);
    try {
      await fetch(apiUrl, { 
        method: 'POST', 
        mode: 'no-cors', 
        body: JSON.stringify({ action: 'save_settings', ...contactForm }) 
      });
      setTimeout(() => {
        setStoreSettings(contactForm);
        setShowContactEdit(false);
        alert("‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢!");
        setLoading(false);
      }, 1000);
    } catch (e) { alert("‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à"); setLoading(false); }
  };

  const deleteProduct = async (id) => {
    if (!window.confirm("‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ä‡∏¥‡πâ‡∏ô‡∏ô‡∏µ‡πâ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å Excel?")) return;
    setLoading(true);
    try {
      await fetch(apiUrl, { method: 'POST', mode: 'no-cors', body: JSON.stringify({ action: 'delete', id }) });
      setTimeout(fetchData, 1000);
    } catch (e) { alert("‡∏•‡∏ö‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à"); setLoading(false); }
  };

  const addToCart = (product) => {
    if (product.Stock <= 0) return alert("‡∏Ç‡∏≠‡∏≠‡∏†‡∏±‡∏¢ ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏´‡∏°‡∏î‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß‡∏Ñ‡πà‡∏∞");
    setCart([...cart, product]);
    alert("‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏á‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏∞ üíñ");
  };

  // --- Search Logic ---
  const handleSearchChange = (e) => {
    const val = e.target.value;
    setSearchQuery(val);
    if (val.trim() !== '' && currentPage !== 'shop') {
      setCurrentPage('shop');
    }
  };

  const filteredProducts = products.filter(p => {
    const matchesSearch = p.Name.toLowerCase().includes(searchQuery.toLowerCase()) || 
                          p.Category.toLowerCase().includes(searchQuery.toLowerCase());
    const matchesCategory = activeCategory === '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î' || p.Category === activeCategory;
    return matchesSearch && matchesCategory;
  });

  // --- UI Components ---
  const ProductCard = ({ p }) => (
    <div className="group bg-white rounded-[32px] overflow-hidden shadow-[0_10px_30px_-15px_rgba(0,0,0,0.05)] hover:shadow-[0_20px_40px_-15px_rgba(244,114,182,0.2)] transition-all duration-500 border border-transparent hover:border-rose-100 relative">
      <div 
        className="aspect-[3/4] overflow-hidden cursor-pointer relative"
        onClick={() => { setSelectedProduct(p); setCurrentPage('detail'); }}
      >
        <img src={p.Image || 'https://via.placeholder.com/400x533'} className="w-full h-full object-cover group-hover:scale-105 transition-transform duration-1000" alt={p.Name} />
        <div className="absolute top-4 left-4">
          <span className="bg-white/80 backdrop-blur-md px-3 py-1 rounded-full text-[10px] font-bold text-rose-500 shadow-sm border border-white/50">
            ‡∏™‡∏ï‡πä‡∏≠‡∏Å: {p.Stock}
          </span>
        </div>
        {p.Stock <= 0 && (
          <div className="absolute inset-0 bg-stone-900/40 backdrop-blur-[2px] flex items-center justify-center">
            <span className="bg-white/90 text-stone-800 px-5 py-2 rounded-full font-bold text-xs uppercase tracking-widest shadow-xl">Out of Stock</span>
          </div>
        )}
      </div>

      {isAdmin && (
        <div className="absolute top-4 right-4 flex flex-col gap-2 z-10 opacity-0 group-hover:opacity-100 transition-opacity duration-300">
          <button onClick={() => { setProductForm(p); setShowConfig(true); }} className="p-2.5 bg-white/90 backdrop-blur text-blue-500 rounded-full shadow-lg hover:bg-blue-500 hover:text-white transition-all"><Edit3 size={16}/></button>
          <button onClick={() => deleteProduct(p.ID)} className="p-2.5 bg-white/90 backdrop-blur text-red-500 rounded-full shadow-lg hover:bg-red-500 hover:text-white transition-all"><Trash2 size={16}/></button>
        </div>
      )}

      <div className="p-6 text-center">
        <p className="text-[10px] uppercase tracking-[0.2em] text-rose-300 font-bold mb-1">{p.Category}</p>
        <h3 className="text-[15px] font-medium text-stone-700 line-clamp-1 mb-2 font-prompt">{p.Name}</h3>
        <p className="text-rose-500 font-bold text-xl font-prompt">‡∏ø{Number(p.Price).toLocaleString()}</p>
        <button 
          onClick={() => addToCart(p)}
          disabled={p.Stock <= 0}
          className={`mt-4 w-full py-3 rounded-2xl text-[11px] font-bold tracking-widest uppercase transition-all duration-300 ${p.Stock > 0 ? 'bg-rose-50 text-rose-400 hover:bg-rose-500 hover:text-white hover:shadow-lg hover:shadow-rose-200' : 'bg-stone-50 text-stone-300 cursor-not-allowed'}`}
        >
          {p.Stock > 0 ? 'Add to Cart' : 'Sold Out'}
        </button>
      </div>
    </div>
  );

  return (
    <div className="min-h-screen bg-[#fffcfc] text-stone-800 font-prompt selection:bg-rose-100 selection:text-rose-600">
      
      {/* Admin Header */}
      {isAdmin && (
        <div className="bg-stone-900 text-white py-3 px-6 flex justify-between items-center text-[11px] sticky top-0 z-[1001] shadow-2xl">
          <div className="flex items-center gap-6">
            <span className="flex items-center gap-2 text-rose-400 font-bold uppercase tracking-wider"><Lock size={12}/> Admin Mode</span>
            <button onClick={() => { setProductForm({ id: '', name: '', price: '', category: '‡πÄ‡∏î‡∏£‡∏™', image: '', stock: 10, description: '', size: 'S,M,L', color: '‡∏ä‡∏°‡∏û‡∏π' }); setShowConfig(true); }} className="hover:text-rose-300 transition-colors flex items-center gap-1"><Plus size={14}/> ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà</button>
            <button onClick={() => setShowContactEdit(true)} className="hover:text-rose-300 transition-colors flex items-center gap-1"><Settings size={14}/> ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡πâ‡∏≤‡∏ô</button>
          </div>
          <div className="flex items-center gap-4">
            <button onClick={() => setIsAdmin(false)} className="bg-rose-500 hover:bg-rose-600 px-4 py-1.5 rounded-full font-bold transition-all shadow-lg shadow-rose-900/20">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
          </div>
        </div>
      )}

      {/* Navigation */}
      <nav className={`bg-white/70 backdrop-blur-xl border-b border-rose-50 sticky transition-all duration-300 z-[1000] ${isAdmin ? 'top-[44px]' : 'top-0'}`}>
        <div className="max-w-7xl mx-auto px-6 h-24 flex justify-between items-center gap-4">
          <div className="flex items-center gap-4 flex-1">
             <button onClick={() => setShowLogin(true)} className="p-2.5 text-stone-300 hover:text-rose-400 transition-all hover:bg-rose-50 rounded-full shrink-0">
              <Lock size={20} />
            </button>
            
            {/* Search Input */}
            <div className={`relative flex items-center group transition-all duration-500 ${isSearchOpen ? 'w-full md:w-64' : 'w-10'}`}>
              <button 
                onClick={() => setIsSearchOpen(!isSearchOpen)}
                className="absolute left-0 p-2.5 text-stone-300 hover:text-rose-400 transition-all hover:bg-rose-50 rounded-full z-10"
              >
                <Search size={20} />
              </button>
              <input 
                type="text"
                placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£..."
                className={`w-full bg-stone-50 border border-transparent rounded-full py-2.5 pl-12 pr-4 outline-none focus:border-rose-100 focus:bg-white text-xs transition-all duration-500 ${isSearchOpen ? 'opacity-100 pointer-events-auto' : 'opacity-0 pointer-events-none'}`}
                value={searchQuery}
                onChange={handleSearchChange}
              />
              {searchQuery && (
                <button 
                  onClick={() => setSearchQuery('')}
                  className="absolute right-3 p-1 text-stone-300 hover:text-rose-400 transition-all"
                >
                  <X size={14} />
                </button>
              )}
            </div>
          </div>
          
          <div className="text-center shrink-0">
            <a href="#" onClick={() => setCurrentPage('home')} className="text-3xl md:text-4xl font-sriracha text-rose-500 hover:opacity-80 transition-opacity tracking-tight block">
              Praewa Fashion
            </a>
            <p className="text-[10px] uppercase tracking-[0.4em] text-stone-400 mt-1 font-medium hidden md:block">Beauty in your style</p>
          </div>

          <div className="flex items-center gap-4 flex-1 justify-end">
            <button className="hidden md:block p-2.5 text-stone-300 hover:text-rose-400 transition-all hover:bg-rose-50 rounded-full">
              <Heart size={20} />
            </button>
            <button onClick={() => setCurrentPage('cart')} className="relative p-3 bg-stone-50 hover:bg-rose-50 rounded-full transition-all group">
              <ShoppingBag size={22} className="text-stone-700 group-hover:text-rose-500 transition-colors" />
              {cart.length > 0 && (
                <span className="absolute -top-1 -right-1 bg-rose-500 text-white text-[9px] w-5 h-5 rounded-full flex items-center justify-center font-bold animate-pulse shadow-lg border-2 border-white">
                  {cart.length}
                </span>
              )}
            </button>
          </div>
        </div>
        <div className="max-w-7xl mx-auto flex justify-center gap-6 md:gap-10 py-4 text-[12px] font-bold uppercase tracking-[0.25em] text-stone-500 border-t border-rose-50/30 overflow-x-auto no-scrollbar">
          <button onClick={() => { setCurrentPage('home'); setSearchQuery(''); }} className={`hover:text-rose-500 transition-colors whitespace-nowrap ${currentPage === 'home' && !searchQuery ? 'text-rose-500' : ''}`}>Home</button>
          <button onClick={() => { setCurrentPage('shop'); setActiveCategory('‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î'); }} className={`hover:text-rose-500 transition-colors whitespace-nowrap ${currentPage === 'shop' ? 'text-rose-500' : ''}`}>Shop</button>
          <button onClick={() => setCurrentPage('contact')} className={`hover:text-rose-500 transition-colors whitespace-nowrap ${currentPage === 'contact' ? 'text-rose-500' : ''}`}>Contact</button>
        </div>
      </nav>

      {/* Main Content */}
      <div className="max-w-7xl mx-auto px-6 py-12">
        
        {/* --- Home Page --- */}
        {currentPage === 'home' && (
          <div className="space-y-24 animate-in fade-in duration-1000">
            {/* Hero Section */}
            <div className="relative h-[600px] rounded-[60px] overflow-hidden group shadow-[0_40px_80px_-30px_rgba(244,114,182,0.3)]">
              <img src="https://images.unsplash.com/photo-1490481651871-ab68de25d43d?w=1200" className="w-full h-full object-cover transition-transform duration-[3s] scale-105 group-hover:scale-100" alt="Hero" />
              <div className="absolute inset-0 bg-gradient-to-t from-rose-200/20 via-transparent to-transparent flex items-center px-6 md:px-16">
                <div className="bg-white/80 backdrop-blur-xl p-8 md:p-14 rounded-[50px] max-w-lg shadow-2xl border border-white/50 animate-in slide-in-from-left-10 duration-700">
                  <h4 className="text-rose-400 font-bold tracking-[0.3em] text-[10px] mb-6 uppercase">Exclusive Collection</h4>
                  <h2 className="text-5xl md:text-6xl font-sriracha text-stone-900 mb-6 leading-[1.1]">Sweet & <br/> Modern</h2>
                  <p className="text-stone-500 text-sm mb-10 leading-relaxed font-prompt">‡∏¢‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö‡πÄ‡∏™‡∏ô‡πà‡∏´‡πå‡πÉ‡∏ô‡∏ï‡∏±‡∏ß‡∏Ñ‡∏∏‡∏ì‡∏î‡πâ‡∏ß‡∏¢‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏ú‡πâ‡∏≤‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏´‡∏ß‡∏≤‡∏ô‡∏ã‡πà‡∏≠‡∏ô‡πÄ‡∏õ‡∏£‡∏µ‡πâ‡∏¢‡∏ß <br className="hidden md:block" /> ‡∏ï‡∏±‡∏î‡πÄ‡∏¢‡πá‡∏ö‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡∏ì‡∏µ‡∏ï‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏±‡πà‡∏ô‡πÉ‡∏à‡πÉ‡∏ô‡∏ó‡∏∏‡∏Å‡πÇ‡∏≠‡∏Å‡∏≤‡∏™</p>
                  <button onClick={() => setCurrentPage('shop')} className="bg-rose-500 text-white px-10 py-4 rounded-full text-xs font-bold uppercase tracking-widest shadow-xl shadow-rose-200 hover:bg-rose-600 hover:-translate-y-1 transition-all flex items-center gap-2 group">
                    Shop Collection <ArrowRight size={16} className="group-hover:translate-x-1 transition-transform"/>
                  </button>
                </div>
              </div>
            </div>

            {/* Featured Categories */}
            <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
              {[
                { name: 'Dresses', img: 'https://images.unsplash.com/photo-1595777457583-95e059d581b8?w=500' },
                { name: 'Blouses', img: 'https://images.unsplash.com/photo-1512436991641-6745cdb1723f?w=500' },
                { name: 'Skirts', img: 'https://images.unsplash.com/photo-1583496661160-fb5886a0aaaa?w=500' }
              ].map(cat => (
                <div key={cat.name} className="relative h-72 rounded-[40px] overflow-hidden cursor-pointer group shadow-lg" onClick={() => { setActiveCategory(cat.name === 'Dresses' ? '‡πÄ‡∏î‡∏£‡∏™' : cat.name === 'Blouses' ? '‡πÄ‡∏™‡∏∑‡πâ‡∏≠' : '‡∏Å‡∏£‡∏∞‡πÇ‡∏õ‡∏£‡∏á'); setCurrentPage('shop'); }}>
                  <img src={cat.img} className="w-full h-full object-cover group-hover:scale-110 transition-transform duration-700" />
                  <div className="absolute inset-0 bg-stone-900/20 group-hover:bg-rose-500/10 transition-colors flex items-center justify-center">
                    <h3 className="text-white text-3xl font-sriracha drop-shadow-lg">{cat.name}</h3>
                  </div>
                </div>
              ))}
            </div>

            {/* Featured Products */}
            <section>
              <div className="flex justify-between items-end mb-12">
                <div>
                  <h3 className="text-3xl font-sriracha text-stone-800">‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ç‡∏≤‡∏¢‡∏î‡∏µ</h3>
                  <p className="text-rose-300 text-sm font-medium mt-1 uppercase tracking-widest italic">Weekly Best Sellers</p>
                </div>
                <button onClick={() => setCurrentPage('shop')} className="text-xs font-bold text-rose-400 hover:text-rose-600 transition-colors flex items-center gap-2 bg-rose-50 px-5 py-2.5 rounded-full">View All <ChevronRight size={14}/></button>
              </div>
              <div className="grid grid-cols-2 lg:grid-cols-4 gap-8">
                {products.length > 0 ? products.slice(0, 4).map(p => <ProductCard key={p.ID} p={p} />) : (
                  <div className="col-span-full py-20 text-center bg-white rounded-[40px] border border-dashed border-rose-100">
                    <Package className="mx-auto text-rose-200 mb-4" size={48} />
                    <p className="text-stone-400 text-sm">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡∏™‡∏ï‡πä‡∏≠‡∏Å...</p>
                  </div>
                )}
              </div>
            </section>
          </div>
        )}

        {/* --- Shop Page --- */}
        {currentPage === 'shop' && (
          <div className="animate-in fade-in duration-700">
            <div className="flex flex-col md:flex-row gap-16">
              <aside className="w-full md:w-72 space-y-10">
                <div className="bg-white p-10 rounded-[45px] shadow-[0_20px_50px_-20px_rgba(0,0,0,0.05)] border border-rose-50">
                  <h3 className="font-sriracha text-2xl text-rose-500 mb-8 pb-4 border-b border-rose-50 flex items-center gap-2"><Store size={20}/> ‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</h3>
                  <div className="flex flex-col gap-5">
                    {['‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î', '‡πÄ‡∏î‡∏£‡∏™', '‡πÄ‡∏™‡∏∑‡πâ‡∏≠', '‡∏Å‡∏£‡∏∞‡πÇ‡∏õ‡∏£‡∏á', '‡∏Å‡∏≤‡∏á‡πÄ‡∏Å‡∏á'].map(cat => (
                      <button 
                        key={cat} 
                        onClick={() => setActiveCategory(cat)}
                        className={`text-sm font-semibold tracking-wide text-left transition-all flex justify-between items-center group ${activeCategory === cat ? 'text-rose-500 translate-x-2' : 'text-stone-400 hover:text-stone-600'}`}
                      >
                        <span>{cat}</span>
                        <div className={`w-1.5 h-1.5 rounded-full bg-rose-400 transition-all ${activeCategory === cat ? 'opacity-100' : 'opacity-0 group-hover:opacity-50'}`}></div>
                      </button>
                    ))}
                  </div>
                </div>

                <div className="bg-rose-500 p-10 rounded-[45px] text-white shadow-xl shadow-rose-200 relative overflow-hidden group">
                  <div className="absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-10 -mt-10 blur-2xl group-hover:scale-150 transition-transform duration-1000"></div>
                  <h4 className="text-rose-100 font-bold text-[10px] tracking-[0.2em] mb-4 uppercase">Special Offer</h4>
                  <h3 className="text-2xl font-sriracha mb-4">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å <br/> ‡∏£‡∏±‡∏ö‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î 10%</h3>
                  <p className="text-[11px] text-rose-100 leading-relaxed mb-6">‡∏£‡∏±‡∏ö‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£‡∏Ñ‡∏≠‡∏•‡πÄ‡∏•‡∏Å‡∏ä‡∏±‡∏ô‡πÉ‡∏´‡∏°‡πà‡∏Å‡πà‡∏≠‡∏ô‡πÉ‡∏Ñ‡∏£ ‡πÅ‡∏•‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏û‡∏¥‡πÄ‡∏®‡∏©‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô</p>
                  <button className="bg-white text-rose-500 px-6 py-2.5 rounded-full text-[10px] font-bold uppercase tracking-wider shadow-lg">Join Now</button>
                </div>
              </aside>

              <div className="flex-1">
                <div className="flex justify-between items-center mb-10">
                  <h2 className="text-3xl font-sriracha text-stone-800">
                    {searchQuery ? `‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤: "${searchQuery}"` : activeCategory}
                  </h2>
                  <p className="text-xs text-stone-400 font-medium">‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î {filteredProducts.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</p>
                </div>
                
                {filteredProducts.length > 0 ? (
                  <div className="grid grid-cols-2 lg:grid-cols-3 gap-10">
                    {filteredProducts.map(p => (
                      <ProductCard key={p.ID} p={p} />
                    ))}
                  </div>
                ) : (
                  <div className="col-span-full py-32 text-center bg-white rounded-[50px] border-2 border-dashed border-rose-50">
                    <div className="w-20 h-20 bg-rose-50 rounded-full flex items-center justify-center mx-auto mb-6 text-rose-300">
                      <Search size={36} />
                    </div>
                    <p className="text-stone-800 font-medium text-lg">‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡πà‡∏∞</p>
                    <p className="text-stone-400 text-sm mt-2">‡∏•‡∏≠‡∏á‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Ñ‡∏≥‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏≠‡∏∑‡πà‡∏ô‡∏î‡∏π‡∏ô‡∏∞‡∏Ñ‡∏∞</p>
                    <button 
                      onClick={() => { setSearchQuery(''); setActiveCategory('‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î'); }}
                      className="mt-8 bg-rose-500 text-white px-8 py-3 rounded-full text-xs font-bold uppercase tracking-widest flex items-center gap-2 mx-auto hover:bg-rose-600 transition-all shadow-lg shadow-rose-100"
                    >
                      <RefreshCcw size={14}/> ‡∏•‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤
                    </button>
                  </div>
                )}
              </div>
            </div>
          </div>
        )}

        {/* --- Detail Page --- */}
        {currentPage === 'detail' && selectedProduct && (
          <div className="animate-in slide-in-from-bottom-8 duration-700 max-w-6xl mx-auto">
            <div className="bg-white rounded-[60px] overflow-hidden shadow-[0_40px_100px_-30px_rgba(0,0,0,0.1)] flex flex-col md:flex-row border border-rose-50">
              <div className="md:w-1/2 aspect-[4/5] overflow-hidden">
                <img src={selectedProduct.Image} className="w-full h-full object-cover hover:scale-105 transition-transform duration-[2s]" />
              </div>
              <div className="md:w-1/2 p-8 md:p-16 flex flex-col justify-center">
                <nav className="flex items-center gap-3 text-[10px] font-bold uppercase tracking-[0.3em] text-stone-300 mb-8">
                  <button className="hover:text-rose-500" onClick={() => setCurrentPage('shop')}>Collection</button>
                  <ChevronRight size={10} />
                  <span className="text-rose-300">{selectedProduct.Category}</span>
                </nav>
                
                <h1 className="text-4xl md:text-5xl font-sriracha text-stone-800 mb-6 leading-tight">{selectedProduct.Name}</h1>
                <div className="flex items-baseline gap-4 mb-10">
                  <p className="text-4xl text-rose-500 font-bold font-prompt">‡∏ø{Number(selectedProduct.Price).toLocaleString()}</p>
                  <p className="text-sm text-stone-300 line-through">‡∏ø{(Number(selectedProduct.Price) * 1.2).toLocaleString()}</p>
                </div>
                
                <div className="inline-flex items-center gap-3 bg-stone-50 border border-stone-100 px-5 py-3 rounded-2xl self-start mb-10">
                  <div className={`w-2 h-2 rounded-full ${selectedProduct.Stock > 0 ? 'bg-green-400 animate-pulse' : 'bg-red-400'}`}></div>
                  <p className="text-[11px] font-bold text-stone-500 uppercase tracking-widest">
                    {selectedProduct.Stock > 0 ? `In Stock: ${selectedProduct.Stock} Units` : 'Out of Stock'}
                  </p>
                </div>

                <div className="mb-12">
                  <h4 className="text-xs font-bold text-stone-800 mb-4 uppercase tracking-[0.2em] flex items-center gap-2">
                    <Info size={14} className="text-rose-400"/> Product Details
                  </h4>
                  <div className="text-sm text-stone-500 leading-relaxed whitespace-pre-line bg-rose-50/30 p-8 rounded-[35px] border border-rose-50">
                    {selectedProduct.Description || '‡∏Ñ‡∏±‡∏î‡∏™‡∏£‡∏£‡∏ú‡πâ‡∏≤‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏î‡∏µ ‡∏™‡∏ß‡∏°‡πÉ‡∏™‡πà‡∏™‡∏ö‡∏≤‡∏¢ ‡∏î‡∏µ‡πÑ‡∏ã‡∏ô‡πå‡∏ó‡∏±‡∏ô‡∏™‡∏°‡∏±‡∏¢‡∏ó‡∏µ‡πà‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏ö‡∏∏‡∏Ñ‡∏•‡∏¥‡∏Å‡∏†‡∏≤‡∏û‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì‡∏î‡∏π‡πÇ‡∏î‡∏î‡πÄ‡∏î‡πà‡∏ô‡πÉ‡∏ô‡∏ó‡∏∏‡∏Å‡πÜ ‡∏ß‡∏±‡∏ô'}
                  </div>
                </div>

                <div className="flex gap-5">
                  <button 
                    disabled={selectedProduct.Stock <= 0}
                    onClick={() => addToCart(selectedProduct)}
                    className={`flex-1 py-5 rounded-full font-bold text-xs uppercase tracking-[0.2em] shadow-2xl transition-all duration-500 ${selectedProduct.Stock > 0 ? 'bg-rose-500 text-white shadow-rose-200 hover:bg-rose-600 hover:-translate-y-1 hover:shadow-rose-300' : 'bg-stone-200 text-stone-400 cursor-not-allowed'}`}
                  >
                    {selectedProduct.Stock > 0 ? 'Add to Bag' : 'Out of Stock'}
                  </button>
                  <button onClick={() => setCurrentPage('shop')} className="w-16 h-16 flex items-center justify-center bg-stone-50 border border-stone-100 rounded-full hover:bg-white hover:border-rose-200 text-stone-400 hover:text-rose-500 transition-all shadow-sm">
                    <X size={24} />
                  </button>
                </div>
              </div>
            </div>
          </div>
        )}

        {/* --- Cart Page --- */}
        {currentPage === 'cart' && (
          <div className="max-w-4xl mx-auto animate-in fade-in duration-700">
            <div className="text-center mb-16">
              <h2 className="text-4xl font-sriracha text-stone-800">Shopping Bag</h2>
              <p className="text-rose-300 text-sm font-medium mt-2">‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ {cart.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤</p>
            </div>

            {cart.length === 0 ? (
              <div className="bg-white p-12 md:p-24 rounded-[60px] text-center shadow-2xl shadow-rose-100 border border-rose-50">
                <div className="w-24 h-24 bg-rose-50 rounded-full flex items-center justify-center mx-auto mb-8 text-rose-300">
                  <ShoppingBag size={48} />
                </div>
                <h3 className="text-xl font-medium mb-4">‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏õ‡∏•‡πà‡∏≤‡∏Ñ‡πà‡∏∞</h3>
                <p className="text-stone-400 text-sm mb-10 max-w-xs mx-auto leading-relaxed">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏î‡∏π‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏ß‡∏¢‡πÜ ‡πÉ‡∏ô‡∏£‡πâ‡∏≤‡∏ô‡πÄ‡∏£‡∏≤‡∏Å‡πà‡∏≠‡∏ô‡∏ô‡∏∞‡∏Ñ‡∏∞ ‡∏°‡∏µ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà‡πÜ ‡πÄ‡∏û‡∏µ‡∏¢‡∏ö‡πÄ‡∏•‡∏¢!</p>
                <button onClick={() => setCurrentPage('shop')} className="bg-stone-900 text-white px-12 py-4 rounded-full text-xs font-bold uppercase tracking-widest shadow-xl shadow-stone-200 hover:bg-rose-500 transition-all">Go to Shop</button>
              </div>
            ) : (
              <div className="space-y-8">
                <div className="bg-white rounded-[45px] shadow-sm border border-rose-50 overflow-hidden">
                  {cart.map((item, i) => (
                    <div key={i} className="p-6 md:p-8 flex items-center gap-4 md:gap-8 border-b border-rose-50 last:border-0 hover:bg-rose-50/10 transition-colors">
                      <img src={item.Image} className="w-20 h-28 md:w-24 md:h-32 object-cover rounded-3xl shadow-md" />
                      <div className="flex-1">
                        <p className="text-[10px] text-rose-300 font-bold uppercase tracking-widest mb-1">{item.Category}</p>
                        <h4 className="text-base md:text-lg font-medium text-stone-800 font-prompt">{item.Name}</h4>
                        <p className="text-rose-500 font-bold text-lg md:text-xl mt-2 font-prompt">‡∏ø{Number(item.Price).toLocaleString()}</p>
                      </div>
                      <button onClick={() => setCart(cart.filter((_, idx) => idx !== i))} className="p-3 md:p-4 text-stone-200 hover:text-red-500 hover:bg-red-50 rounded-full transition-all group">
                        <Trash2 size={20} className="group-hover:scale-110 transition-transform" />
                      </button>
                    </div>
                  ))}
                </div>
                
                <div className="bg-white p-8 md:p-12 rounded-[50px] shadow-2xl border-2 border-rose-50 flex flex-col md:flex-row justify-between items-center gap-10">
                  <div className="text-center md:text-left">
                    <p className="text-stone-400 text-xs font-bold uppercase tracking-widest mb-2">Order Total</p>
                    <h3 className="text-4xl md:text-5xl font-prompt font-bold text-rose-500 tracking-tighter">‡∏ø{cart.reduce((sum, item) => sum + Number(item.Price), 0).toLocaleString()}</h3>
                  </div>
                  <button 
                    onClick={() => window.open(`https://line.me/ti/p/${storeSettings.line}?text=‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡πà‡∏∞ ‡∏™‡∏ô‡πÉ‡∏à‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤: ${cart.map(c => c.Name).join(', ')}`)} 
                    className="w-full md:w-auto bg-stone-900 text-white px-16 py-5 rounded-full text-xs font-bold uppercase tracking-[0.2em] hover:bg-rose-600 transition-all shadow-2xl shadow-stone-200 hover:-translate-y-1 active:translate-y-0"
                  >
                    Confirm Order (LINE)
                  </button>
                </div>
              </div>
            )}
          </div>
        )}

        {/* --- Contact Page --- */}
        {currentPage === 'contact' && (
          <div className="max-w-4xl mx-auto animate-in zoom-in-95 duration-1000">
             <div className="text-center mb-20">
              <h2 className="text-5xl font-sriracha text-stone-800">Get in Touch</h2>
              <p className="text-rose-300 text-sm font-medium mt-4 tracking-widest uppercase italic">We'd love to hear from you</p>
            </div>
            
            <div className="grid grid-cols-1 md:grid-cols-3 gap-10">
              <a href={storeSettings.facebook} target="_blank" className="bg-white p-12 rounded-[50px] shadow-[0_30px_60px_-25px_rgba(0,0,0,0.05)] border border-rose-50 hover:shadow-2xl hover:-translate-y-3 transition-all group text-center">
                <div className="w-20 h-20 bg-blue-50 text-blue-500 rounded-[30px] flex items-center justify-center mx-auto mb-8 group-hover:bg-blue-500 group-hover:text-white transition-all duration-500 rotate-3 group-hover:rotate-0"><Facebook size={40}/></div>
                <h4 className="font-bold text-stone-800 mb-2 uppercase tracking-widest text-xs">Facebook</h4>
                <p className="text-[11px] text-stone-400 italic">Follow our page</p>
              </a>
              <a href={`https://line.me/ti/p/${storeSettings.line}`} target="_blank" className="bg-white p-12 rounded-[50px] shadow-[0_30px_60px_-25px_rgba(0,0,0,0.05)] border border-rose-50 hover:shadow-2xl hover:-translate-y-3 transition-all group text-center">
                <div className="w-20 h-20 bg-green-50 text-green-500 rounded-[30px] flex items-center justify-center mx-auto mb-8 group-hover:bg-green-500 group-hover:text-white transition-all duration-500 -rotate-3 group-hover:rotate-0"><MessageCircle size={40}/></div>
                <h4 className="font-bold text-stone-800 mb-2 uppercase tracking-widest text-xs">Line Chat</h4>
                <p className="text-[11px] text-stone-400 italic">{storeSettings.line}</p>
              </a>
              <a href={`tel:${storeSettings.phone}`} className="bg-white p-12 rounded-[50px] shadow-[0_30px_60px_-25px_rgba(0,0,0,0.05)] border border-rose-50 hover:shadow-2xl hover:-translate-y-3 transition-all group text-center">
                <div className="w-20 h-20 bg-rose-50 text-rose-500 rounded-[30px] flex items-center justify-center mx-auto mb-8 group-hover:bg-rose-500 group-hover:text-white transition-all duration-500 rotate-6 group-hover:rotate-0"><Phone size={40}/></div>
                <h4 className="font-bold text-stone-800 mb-2 uppercase tracking-widest text-xs">Call Us</h4>
                <p className="text-[11px] text-stone-400 italic">{storeSettings.phone}</p>
              </a>
            </div>

            <div className="mt-20 bg-white p-8 md:p-16 rounded-[60px] shadow-sm border border-rose-50 flex flex-col md:flex-row items-center gap-12">
               <div className="w-24 h-24 bg-rose-100 rounded-full flex items-center justify-center shrink-0">
                  <MapPin size={40} className="text-rose-500" />
               </div>
               <div className="text-center md:text-left">
                  <h3 className="text-2xl font-sriracha text-stone-800 mb-4">‡∏´‡∏ô‡πâ‡∏≤‡∏£‡πâ‡∏≤‡∏ô‡∏´‡∏•‡∏±‡∏Å (Main Store)</h3>
                  <p className="text-stone-400 text-sm leading-relaxed font-prompt">‡∏´‡πâ‡∏≤‡∏á‡∏™‡∏£‡∏£‡∏û‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ä‡∏±‡πâ‡∏ô‡∏ô‡∏≥ ‡πÇ‡∏ã‡∏ô‡πÅ‡∏ü‡∏ä‡∏±‡πà‡∏ô‡∏™‡∏ï‡∏£‡∏µ ‡∏ä‡∏±‡πâ‡∏ô 2 <br/> ‡πÄ‡∏õ‡∏¥‡∏î‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô 10:00 - 21:00 ‡∏ô. ‡πÅ‡∏ß‡∏∞‡∏°‡∏≤‡∏•‡∏≠‡∏á‡∏ä‡∏∏‡∏î‡∏™‡∏ß‡∏¢‡πÜ ‡∏Å‡∏±‡∏ô‡πÑ‡∏î‡πâ‡∏ô‡∏∞‡∏Ñ‡∏∞</p>
               </div>
            </div>
          </div>
        )}

      </div>

      {/* Footer */}
      <footer className="bg-white py-24 border-t border-rose-50 mt-20 relative overflow-hidden">
        <div className="absolute top-0 left-1/2 -translate-x-1/2 w-[1000px] h-[1000px] bg-rose-50/20 rounded-full blur-3xl -z-10 -mt-[500px]"></div>
        <div className="max-w-7xl mx-auto px-6 flex flex-col items-center">
          <h2 className="text-5xl font-sriracha text-rose-500 mb-8 tracking-tighter">Praewa Fashion</h2>
          <p className="text-stone-400 text-[13px] max-w-md text-center leading-loose mb-12 font-prompt italic">
            "‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏ß‡∏¢‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏°‡∏µ‡πÅ‡∏Ñ‡πà‡πÅ‡∏ö‡∏ö‡πÄ‡∏î‡∏µ‡∏¢‡∏ß ‡πÄ‡∏£‡∏≤‡∏à‡∏∂‡∏á‡∏Ñ‡∏±‡∏î‡∏™‡∏£‡∏£‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏ú‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏ä‡πà‡∏ß‡∏¢‡∏î‡∏∂‡∏á‡∏ï‡∏±‡∏ß‡∏ï‡∏ô <br/> ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏±‡πà‡∏ô‡πÉ‡∏à‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏≠‡∏Å‡∏°‡∏≤‡πÉ‡∏´‡πâ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î"
          </p>
          <div className="flex gap-10 mb-16">
            <a href={storeSettings.facebook} target="_blank" className="text-stone-300 hover:text-blue-500 transition-all hover:scale-125"><Facebook size={24}/></a>
            <a href={`https://line.me/ti/p/${storeSettings.line}`} target="_blank" className="text-stone-300 hover:text-green-500 transition-all hover:scale-125"><MessageCircle size={24}/></a>
            <a href={`tel:${storeSettings.phone}`} className="text-stone-300 hover:text-rose-500 transition-all hover:scale-125"><Phone size={24}/></a>
          </div>
          <div className="w-full h-px bg-gradient-to-r from-transparent via-rose-100 to-transparent mb-12"></div>
          <div className="text-[10px] uppercase tracking-[0.4em] text-stone-300 font-bold">
            &copy; 2026 Praewa Fashion Professional Store | All Rights Reserved
          </div>
        </div>
      </footer>

      {/* --- Modals & Overlays --- */}

      {/* Global Loader */}
      {loading && (
        <div className="fixed inset-0 bg-white/80 backdrop-blur-md z-[9999] flex flex-col items-center justify-center text-rose-500">
          <div className="relative">
             <div className="w-20 h-20 border-4 border-rose-50 border-t-rose-500 rounded-full animate-spin"></div>
             <Heart className="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-rose-500 animate-pulse" size={24} />
          </div>
          <p className="mt-6 font-bold uppercase tracking-[0.3em] text-[10px] animate-pulse">Syncing Database...</p>
        </div>
      )}

      {/* Admin Login Modal */}
      {showLogin && (
        <div className="fixed inset-0 bg-stone-900/60 backdrop-blur-xl z-[2000] flex items-center justify-center p-6">
          <div className="bg-white rounded-[50px] w-full max-w-sm overflow-hidden shadow-2xl animate-in zoom-in-95 duration-300 border border-white/20">
            <div className="bg-stone-900 p-12 text-center text-white relative overflow-hidden">
              <div className="absolute top-0 right-0 w-32 h-32 bg-white/5 rounded-full -mr-16 -mt-16"></div>
              <button onClick={() => setShowLogin(false)} className="absolute top-6 right-6 text-stone-500 hover:text-white transition-colors"><X size={24}/></button>
              <div className="w-20 h-20 bg-rose-500 rounded-3xl flex items-center justify-center mx-auto mb-6 shadow-xl shadow-rose-900/40 rotate-12"><Lock size={36} className="text-white"/></div>
              <h3 className="text-3xl font-sriracha">Owner Login</h3>
              <p className="text-stone-500 text-[10px] mt-2 uppercase tracking-widest font-bold">Authorized Access Only</p>
            </div>
            <div className="p-12 space-y-6">
              <input 
                id="adm_pass" 
                type="password" 
                placeholder="Password (admin1234)" 
                className="w-full bg-stone-50 border-2 border-stone-100 rounded-3xl p-5 focus:border-rose-300 outline-none transition-all text-center font-bold font-prompt" 
                onKeyDown={(e) => { if(e.key === 'Enter' && e.target.value === 'admin1234') { setIsAdmin(true); setShowLogin(false); alert("‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡∏Ñ‡πà‡∏∞ ‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏£‡πâ‡∏≤‡∏ô üå∏"); }}}
              />
              <button onClick={() => { if(document.getElementById('adm_pass').value === 'admin1234') { setIsAdmin(true); setShowLogin(false); alert("‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡∏Ñ‡πà‡∏∞ ‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏£‡πâ‡∏≤‡∏ô üå∏"); } else { alert("‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏ô‡∏∞‡∏Ñ‡∏∞"); }}} className="w-full bg-rose-500 text-white py-5 rounded-3xl font-bold uppercase tracking-widest text-[11px] shadow-xl shadow-rose-200 hover:bg-stone-900 transition-all">Sign In</button>
            </div>
          </div>
        </div>
      )}

      {/* Product Add/Edit Modal */}
      {showConfig && (
        <div className="fixed inset-0 bg-stone-900/50 backdrop-blur-md z-[2000] flex items-center justify-center p-6">
          <div className="bg-white rounded-[60px] w-full max-w-xl overflow-hidden shadow-2xl animate-in slide-in-from-bottom-12 duration-700">
            <div className="bg-stone-900 p-10 flex justify-between items-center text-white">
              <div>
                <h3 className="font-sriracha text-3xl">{productForm.id ? 'Edit Product' : 'Add New Arrival'}</h3>
                <p className="text-[9px] uppercase tracking-[0.3em] text-stone-500 mt-1">Excel Database Management</p>
              </div>
              <button onClick={() => setShowConfig(false)} className="p-3 hover:bg-white/10 rounded-full transition-colors"><X size={24}/></button>
            </div>
            <form onSubmit={handleSaveProduct} className="p-12 space-y-6 max-h-[70vh] overflow-y-auto custom-scroll">
              <div className="space-y-6">
                <div><label className="text-[10px] uppercase font-bold text-stone-400 mb-2 block tracking-widest">Product Name</label><input required value={productForm.name} onChange={(e) => setProductForm({...productForm, name: e.target.value})} className="w-full bg-stone-50 rounded-2xl p-4 border border-stone-100 outline-none focus:border-rose-200 transition-all font-prompt" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏ú‡πâ‡∏≤..." /></div>
                <div className="grid grid-cols-2 gap-6">
                  <div><label className="text-[10px] uppercase font-bold text-stone-400 mb-2 block tracking-widest">Price (‡∏ø)</label><input type="number" required value={productForm.price} onChange={(e) => setProductForm({...productForm, price: e.target.value})} className="w-full bg-stone-50 rounded-2xl p-4 border border-stone-100 outline-none font-prompt" /></div>
                  <div><label className="text-[10px] uppercase font-bold text-stone-400 mb-2 block tracking-widest">Stock Units</label><input type="number" required value={productForm.stock} onChange={(e) => setProductForm({...productForm, stock: e.target.value})} className="w-full bg-stone-50 rounded-2xl p-4 border border-stone-100 outline-none font-prompt" /></div>
                </div>
                <div><label className="text-[10px] uppercase font-bold text-stone-400 mb-2 block tracking-widest">Category</label>
                  <select value={productForm.category} onChange={(e) => setProductForm({...productForm, category: e.target.value})} className="w-full bg-stone-50 rounded-2xl p-4 border border-stone-100 outline-none font-prompt">
                    <option>‡πÄ‡∏î‡∏£‡∏™</option><option>‡πÄ‡∏™‡∏∑‡πâ‡∏≠</option><option>‡∏Å‡∏£‡∏∞‡πÇ‡∏õ‡∏£‡∏á</option><option>‡∏Å‡∏≤‡∏á‡πÄ‡∏Å‡∏á</option>
                  </select>
                </div>
                <div><label className="text-[10px] uppercase font-bold text-stone-400 mb-2 block tracking-widest">Image URL</label><input value={productForm.image} onChange={(e) => setProductForm({...productForm, image: e.target.value})} className="w-full bg-stone-50 rounded-2xl p-4 border border-stone-100 outline-none font-prompt" placeholder="https://images.unsplash.com/..." /></div>
                <div><label className="text-[10px] uppercase font-bold text-stone-400 mb-2 block tracking-widest">Full Description</label><textarea value={productForm.description} onChange={(e) => setProductForm({...productForm, description: e.target.value})} className="w-full bg-stone-50 rounded-3xl p-6 border border-stone-100 outline-none h-32 resize-none font-prompt" placeholder="‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏ú‡πâ‡∏≤ ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏≠‡∏∑‡πà‡∏ô‡πÜ..." /></div>
              </div>
              <button type="submit" className="w-full bg-rose-500 text-white py-5 rounded-[30px] font-bold uppercase tracking-widest text-xs shadow-xl shadow-rose-100 hover:bg-stone-900 transition-all mt-6">Save to Cloud Excel</button>
            </form>
          </div>
        </div>
      )}

      {/* Contact Info Edit Modal */}
      {showContactEdit && (
        <div className="fixed inset-0 bg-stone-900/50 backdrop-blur-md z-[2000] flex items-center justify-center p-6">
          <div className="bg-white rounded-[50px] w-full max-w-sm overflow-hidden shadow-2xl animate-in zoom-in-95 duration-300">
            <div className="bg-rose-50 p-10 flex justify-between items-center border-b border-rose-100">
              <h3 className="font-sriracha text-2xl text-rose-500 flex items-center gap-3">Contact Settings</h3>
              <button onClick={() => setShowContactEdit(false)} className="p-2 hover:bg-white rounded-full transition-all"><X size={20}/></button>
            </div>
            <div className="p-12 space-y-6">
              <div><label className="text-[10px] font-bold text-stone-400 mb-2 block uppercase tracking-widest">Facebook Link</label><input value={contactForm.facebook} onChange={(e) => setContactForm({...contactForm, facebook: e.target.value})} className="w-full bg-stone-50 border border-stone-100 rounded-2xl p-4 outline-none focus:border-rose-300 transition-all font-prompt" /></div>
              <div><label className="text-[10px] font-bold text-stone-400 mb-2 block uppercase tracking-widest">Line ID</label><input value={contactForm.line} onChange={(e) => setContactForm({...contactForm, line: e.target.value})} className="w-full bg-stone-50 border border-stone-100 rounded-2xl p-4 outline-none focus:border-rose-300 transition-all font-prompt" /></div>
              <div><label className="text-[10px] font-bold text-stone-400 mb-2 block uppercase tracking-widest">Phone Number</label><input value={contactForm.phone} onChange={(e) => setContactForm({...contactForm, phone: e.target.value})} className="w-full bg-stone-50 border border-stone-100 rounded-2xl p-4 outline-none focus:border-rose-300 transition-all font-prompt" /></div>
              <button onClick={handleSaveSettings} className="w-full bg-stone-900 text-white py-5 rounded-3xl font-bold uppercase tracking-widest text-[10px] mt-6 hover:bg-rose-500 transition-all shadow-xl shadow-stone-200">Save Changes</button>
            </div>
          </div>
        </div>
      )}

      {/* Global CSS for Custom Scrollbar */}
      <style dangerouslySetInnerHTML={{ __html: `
        .custom-scroll::-webkit-scrollbar { width: 6px; }
        .custom-scroll::-webkit-scrollbar-track { background: transparent; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #fee2e2; border-radius: 10px; }
        .custom-scroll::-webkit-scrollbar-thumb:hover { background: #fecdd3; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
      `}} />

    </div>
  );
}
